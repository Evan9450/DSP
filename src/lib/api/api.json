{
  "openapi": "3.1.0",
  "info": {
    "title": "DSP System",
    "description": "DSP System - Driver, Vehicle, Schedule & Asset Management Platform",
    "version": "1.0.0"
  },
  "paths": {
    "/health": {
      "get": {
        "summary": "Health Check",
        "description": "Health check endpoint.",
        "operationId": "health_check_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/login": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Login",
        "description": "Authenticate user and return JWT token.",
        "operationId": "login_api_v1_auth_login_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserLogin"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Token"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/driver/login": {
      "post": {
        "tags": [
          "Driver App"
        ],
        "summary": "Driver Login",
        "description": "Driver login - authenticate using Amazon ID and password.\n\nRequirements:\n- Driver must have valid amazon_id and password\n- Driver must have a schedule for today to login\n\nReturns JWT token for driver app authentication.",
        "operationId": "driver_login_api_v1_driver_login_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DriverLogin"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DriverToken"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/driver/today": {
      "get": {
        "tags": [
          "Driver App"
        ],
        "summary": "Get Today Info",
        "description": "Get today's schedule information and existing inspection (if any).\n\nReturns:\n- schedule: Today's schedule with vehicle and route assignment\n- existing_inspection: Today's inspection record if already created",
        "operationId": "get_today_info_api_v1_driver_today_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/driver/inspection": {
      "put": {
        "tags": [
          "Driver App"
        ],
        "summary": "Update Inspection",
        "description": "Update today's inspection record.\n\nDriver can only update today's inspection.\nAllows updating photos, mileage, and notes multiple times within the same day.",
        "operationId": "update_inspection_api_v1_driver_inspection_put",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DriverInspectionUpdate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VehicleInspectionResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      },
      "post": {
        "tags": [
          "Driver App"
        ],
        "summary": "Create Inspection",
        "description": "Create today's vehicle inspection record.\n\nDriver can only create one inspection per day.\nPhoto URLs should be obtained from /api/v1/files/batch-upload first.\n\nWorkflow:\n1. Driver uploads photos to /api/v1/files/batch-upload\n2. Get photo URLs from response\n3. Call this endpoint with inspection_urls array",
        "operationId": "create_inspection_api_v1_driver_inspection_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DriverInspectionCreate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VehicleInspectionResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/users/me": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Get Current User Info",
        "description": "Get current user information.",
        "operationId": "get_current_user_info_api_v1_users_me_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/users/": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "List Users",
        "description": "List all users.\n\nUser roles:\n- 0 (Admin): Superuser - only one allowed in the system\n- 1 (Manager): Manager - can have multiple",
        "operationId": "list_users_api_v1_users__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/UserResponse"
                  },
                  "title": "Response List Users Api V1 Users  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Users"
        ],
        "summary": "Create User",
        "description": "Create new user.\n\nUser roles:\n- 0 (Admin): Superuser - only ONE allowed in the system\n- 1 (Manager): Manager - can have multiple\n\nNote: Only one admin (role 0) is allowed in the system.",
        "operationId": "create_user_api_v1_users__post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/{user_id}": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Get User",
        "description": "Get user by ID.",
        "operationId": "get_user_api_v1_users__user_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "User Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Users"
        ],
        "summary": "Update User",
        "description": "Update user.\n\nUser roles:\n- 0 (Admin): Superuser - only ONE allowed in the system\n- 1 (Manager): Manager - can have multiple\n\nPassword change:\n- To change password, simply provide the new password in the 'password' field\n- No old password verification required (admin can reset any user's password)\n\nRestrictions:\n- Cannot change role to admin (0) if another admin already exists\n- Cannot remove admin role from the only admin",
        "operationId": "update_user_api_v1_users__user_id__put",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "User Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Users"
        ],
        "summary": "Delete User",
        "description": "Delete user.\n\nCannot delete:\n- Your own account\n- The admin (role 0, superuser) account",
        "operationId": "delete_user_api_v1_users__user_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "User Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/drivers/": {
      "get": {
        "tags": [
          "Drivers (Admin)"
        ],
        "summary": "List Drivers",
        "description": "List all drivers.",
        "operationId": "list_drivers_api_v1_drivers__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/DriverResponse"
                  },
                  "title": "Response List Drivers Api V1 Drivers  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Drivers (Admin)"
        ],
        "summary": "Create Driver",
        "description": "Create new driver.\n\nRequired fields:\n- name: Driver name (required)\n\nOptional fields:\n- amazon_id: Amazon ID (optional)\n- password: Login password (optional)\n- phone, email, address, deputy_id\n\nActivation logic:\n- Only activated (is_active=True) if BOTH amazon_id AND password are provided\n- Otherwise created as inactive (is_active=False)",
        "operationId": "create_driver_api_v1_drivers__post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DriverCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DriverResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/drivers/loginable": {
      "get": {
        "tags": [
          "Drivers (Admin)"
        ],
        "summary": "List Loginable Drivers",
        "description": "List all drivers that can login to driver app.\n\nA driver can login if:\n- is_active is True (manually set by admin)\n- amazon_id is set\n- hashed_password is set\n\nReturns amazon_id, hashed_password, and other basic info for debugging.",
        "operationId": "list_loginable_drivers_api_v1_drivers_loginable_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/drivers/{driver_id}": {
      "get": {
        "tags": [
          "Drivers (Admin)"
        ],
        "summary": "Get Driver",
        "description": "Get driver by ID.",
        "operationId": "get_driver_api_v1_drivers__driver_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "driver_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Driver Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DriverResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Drivers (Admin)"
        ],
        "summary": "Update Driver",
        "description": "更新司机信息（支持同时更新基本信息和文件）\n\n- 可以只更新基本信息\n- 可以手动设置 is_active 状态（控制司机是否可以登录）\n- 可以通过license_file_url/visa_file_url直接传URL数组（JSON字符串格式）\n- 可以通过license_files/visa_files上传新文件\n- 也可以同时更新\n\n自动激活/禁用逻辑：\n1. 设置 amazon_id（当 hashed_password 存在且未手动设置过 is_active）→ 自动激活\n2. 删除 amazon_id（清空或设为空字符串）→ 强制禁用\n3. 手动设置 is_active → 标记为手动设置，后续自动逻辑不会覆盖\n\n示例：\n- license_file_url: '[\"http://localhost:8000/api/v1/files/download/1\", \"http://localhost:8000/api/v1/files/download/2\"]'\n- is_active: true/false (手动控制)\n- amazon_id: \"\" (删除 amazon_id，强制禁用)",
        "operationId": "update_driver_api_v1_drivers__driver_id__put",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "driver_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Driver Id"
            }
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "allOf": [
                  {
                    "$ref": "#/components/schemas/Body_update_driver_api_v1_drivers__driver_id__put"
                  }
                ],
                "title": "Body"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DriverResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Drivers (Admin)"
        ],
        "summary": "Delete Driver",
        "description": "Delete driver and all associated files from MinIO storage.",
        "operationId": "delete_driver_api_v1_drivers__driver_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "driver_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Driver Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/drivers/import/amazon-ids": {
      "post": {
        "tags": [
          "Drivers (Admin)"
        ],
        "summary": "Import Amazon Ids",
        "description": "Import Amazon IDs from Excel/CSV file.",
        "operationId": "import_amazon_ids_api_v1_drivers_import_amazon_ids_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_import_amazon_ids_api_v1_drivers_import_amazon_ids_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/drivers/{driver_id}/set-password": {
      "post": {
        "tags": [
          "Drivers (Admin)"
        ],
        "summary": "Set Driver Password",
        "description": "Set or reset password for driver app login (Admin only).\n\nAuto-enable logic:\n- If amazon_id exists AND admin has NOT manually set is_active → auto-enable (is_active=True)\n- If admin previously manually disabled the driver → preserves manual setting",
        "operationId": "set_driver_password_api_v1_drivers__driver_id__set_password_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "driver_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Driver Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DriverSetPassword"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/drivers/{driver_id}/delete-license-file": {
      "delete": {
        "tags": [
          "Drivers (Admin)"
        ],
        "summary": "Delete License File",
        "description": "删除指定的驾照文件\n\n- file_url: 要删除的文件URL",
        "operationId": "delete_license_file_api_v1_drivers__driver_id__delete_license_file_delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "driver_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Driver Id"
            }
          },
          {
            "name": "file_url",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "File Url"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/drivers/{driver_id}/delete-visa-file": {
      "delete": {
        "tags": [
          "Drivers (Admin)"
        ],
        "summary": "Delete Visa File",
        "description": "删除指定的签证文件\n\n- file_url: 要删除的文件URL",
        "operationId": "delete_visa_file_api_v1_drivers__driver_id__delete_visa_file_delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "driver_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Driver Id"
            }
          },
          {
            "name": "file_url",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "File Url"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/drivers/documents/expiring": {
      "get": {
        "tags": [
          "Drivers (Admin)"
        ],
        "summary": "Get Expiring Documents",
        "description": "获取即将过期的驾照和签证列表",
        "operationId": "get_expiring_documents_api_v1_drivers_documents_expiring_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "days_ahead",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 30,
              "title": "Days Ahead"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/vehicles/": {
      "get": {
        "tags": [
          "Vehicles"
        ],
        "summary": "List Vehicles",
        "description": "List all vehicles with optional filters.",
        "operationId": "list_vehicles_api_v1_vehicles__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "status_filter",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Status Filter"
            }
          },
          {
            "name": "condition_filter",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Condition Filter"
            }
          },
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/VehicleResponse"
                  },
                  "title": "Response List Vehicles Api V1 Vehicles  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Vehicles"
        ],
        "summary": "Create Vehicle",
        "description": "Create new vehicle.",
        "operationId": "create_vehicle_api_v1_vehicles__post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VehicleCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VehicleResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/vehicles/available": {
      "get": {
        "tags": [
          "Vehicles"
        ],
        "summary": "List Available Vehicles",
        "description": "List available vehicles (condition=\"available\") for assignment.",
        "operationId": "list_available_vehicles_api_v1_vehicles_available_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/VehicleResponse"
                  },
                  "type": "array",
                  "title": "Response List Available Vehicles Api V1 Vehicles Available Get"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/vehicles/inspections/{inspection_id}/review": {
      "post": {
        "tags": [
          "Vehicles"
        ],
        "summary": "Review Inspection",
        "description": "Admin review/approve inspection (admin only).\n\nAdmins can:\n- Set inspection status (inspection_status: \"pending\", \"passed\", \"failed\")\n- Add review notes/feedback (admin_notes)\n\nAdmins CANNOT update the inspection content (date, mileage, photos).",
        "operationId": "review_inspection_api_v1_vehicles_inspections__inspection_id__review_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "inspection_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Inspection Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VehicleInspectionReview"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VehicleInspectionResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/vehicles/inspections": {
      "get": {
        "tags": [
          "Vehicles"
        ],
        "summary": "List Inspections",
        "description": "List vehicle inspection records with optional filters.\n\nQuery parameters:\n- vehicle_id: Filter by vehicle ID\n- driver_id: Filter by driver ID\n- reviewed: Filter by review status (true/false)\n- inspection_status: Filter by inspection status (\"pending\", \"passed\", \"failed\")\n- inspection_date: Filter by specific date (YYYY-MM-DD)\n- start_date: Filter by date range start (YYYY-MM-DD)\n- end_date: Filter by date range end (YYYY-MM-DD)\n- skip: Pagination offset\n- limit: Maximum records to return\n\nExamples:\n- Get all inspections for vehicle 1: ?vehicle_id=1\n- Get inspections on specific date: ?inspection_date=2025-11-22\n- Get inspections in date range: ?start_date=2025-11-01&end_date=2025-11-30\n- Get unreviewed inspections: ?reviewed=false\n- Get pending inspections: ?inspection_status=pending\n- Get passed inspections: ?inspection_status=passed\n- Get failed inspections: ?inspection_status=failed",
        "operationId": "list_inspections_api_v1_vehicles_inspections_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "vehicle_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "title": "Vehicle Id"
            }
          },
          {
            "name": "driver_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "title": "Driver Id"
            }
          },
          {
            "name": "reviewed",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "title": "Reviewed"
            }
          },
          {
            "name": "inspection_status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Inspection Status"
            }
          },
          {
            "name": "inspection_date",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date",
              "title": "Inspection Date"
            }
          },
          {
            "name": "start_date",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date",
              "title": "Start Date"
            }
          },
          {
            "name": "end_date",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date",
              "title": "End Date"
            }
          },
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/VehicleInspectionResponse"
                  },
                  "title": "Response List Inspections Api V1 Vehicles Inspections Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/vehicles/maintenance-due": {
      "get": {
        "tags": [
          "Vehicles"
        ],
        "summary": "List Vehicles Maintenance Due",
        "description": "List vehicles that need maintenance soon.",
        "operationId": "list_vehicles_maintenance_due_api_v1_vehicles_maintenance_due_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "days_ahead",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 7,
              "title": "Days Ahead"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/VehicleResponse"
                  },
                  "title": "Response List Vehicles Maintenance Due Api V1 Vehicles Maintenance Due Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/vehicles/{vehicle_id}": {
      "get": {
        "tags": [
          "Vehicles"
        ],
        "summary": "Get Vehicle Detail",
        "description": "Get vehicle detail by ID with photos and recent inspections.",
        "operationId": "get_vehicle_detail_api_v1_vehicles__vehicle_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "vehicle_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Vehicle Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VehicleDetailResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Vehicles"
        ],
        "summary": "Update Vehicle",
        "description": "Update vehicle.",
        "operationId": "update_vehicle_api_v1_vehicles__vehicle_id__put",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "vehicle_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Vehicle Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VehicleUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VehicleResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Vehicles"
        ],
        "summary": "Delete Vehicle",
        "description": "Delete vehicle.",
        "operationId": "delete_vehicle_api_v1_vehicles__vehicle_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "vehicle_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Vehicle Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/vehicles/{vehicle_id}/inspection-photos": {
      "get": {
        "tags": [
          "Vehicles"
        ],
        "summary": "Get Vehicle Inspection Photos",
        "description": "Get inspection records with photos for a specific vehicle.\n\nQuery parameters:\n- vehicle_id (required): Vehicle ID\n- inspection_date (optional): Filter by specific date (format: YYYY-MM-DD)\n- skip: Number of records to skip (pagination)\n- limit: Maximum number of records to return\n\nReturns inspection records grouped by date, each with photo arrays.",
        "operationId": "get_vehicle_inspection_photos_api_v1_vehicles__vehicle_id__inspection_photos_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "vehicle_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Vehicle Id"
            }
          },
          {
            "name": "inspection_date",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date",
              "title": "Inspection Date"
            }
          },
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 50,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/VehicleInspectionPhotoResponse"
                  },
                  "title": "Response Get Vehicle Inspection Photos Api V1 Vehicles  Vehicle Id  Inspection Photos Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/vehicles/{vehicle_id}/usage-history": {
      "get": {
        "tags": [
          "Vehicles"
        ],
        "summary": "Get Vehicle Usage History",
        "description": "Get comprehensive usage history for a vehicle.\n\nThis includes:\n- Schedule assignments (when the vehicle was assigned to drivers)\n- Inspection records with photos (from drivers' daily inspections)\n- Maintenance records",
        "operationId": "get_vehicle_usage_history_api_v1_vehicles__vehicle_id__usage_history_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "vehicle_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Vehicle Id"
            }
          },
          {
            "name": "limit_assignments",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 50,
              "title": "Limit Assignments"
            }
          },
          {
            "name": "limit_inspections",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 50,
              "title": "Limit Inspections"
            }
          },
          {
            "name": "limit_maintenance",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 20,
              "title": "Limit Maintenance"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VehicleUsageHistoryResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/vehicles/{vehicle_id}/send-maintenance-email": {
      "post": {
        "tags": [
          "Vehicles"
        ],
        "summary": "Send Maintenance Booking Email",
        "description": "Manually send maintenance booking email to the vehicle's workshop.\n\nThis endpoint allows admin to manually trigger a maintenance booking email\nto the workshop configured for this vehicle.\n\nRequirements:\n- Vehicle must have a workshop_email configured\n- Vehicle must have a next_maintenance_date set\n\nReturns:\n- success: Whether the email was sent successfully\n- message: Status message\n- vehicle_info: Basic vehicle information",
        "operationId": "send_maintenance_booking_email_api_v1_vehicles__vehicle_id__send_maintenance_email_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "vehicle_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Vehicle Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/schedules/": {
      "get": {
        "tags": [
          "Schedules"
        ],
        "summary": "List Schedules",
        "description": "获取排班列表\n\n- 如果指定了schedule_date且数据库中没有该日期的数据，会自动从Deputy同步（除非auto_sync=False）\n- 支持按deputy_id和checkin_status过滤",
        "operationId": "list_schedules_api_v1_schedules__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "schedule_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "description": "过滤指定日期",
              "title": "Schedule Date"
            },
            "description": "过滤指定日期"
          },
          {
            "name": "deputy_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "过滤Deputy员工ID",
              "title": "Deputy Id"
            },
            "description": "过滤Deputy员工ID"
          },
          {
            "name": "checkin_status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/CheckinStatus"
                },
                {
                  "type": "null"
                }
              ],
              "description": "过滤签到状态",
              "title": "Checkin Status"
            },
            "description": "过滤签到状态"
          },
          {
            "name": "auto_sync",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "如果数据库没有数据，是否自动同步Deputy",
              "default": true,
              "title": "Auto Sync"
            },
            "description": "如果数据库没有数据，是否自动同步Deputy"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ScheduleResponse"
                  },
                  "title": "Response List Schedules Api V1 Schedules  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/schedules/today": {
      "get": {
        "tags": [
          "Schedules"
        ],
        "summary": "Get Today Schedules",
        "description": "获取今天的排班\n\n- 如果数据库中没有今天的数据，会自动从Deputy同步（除非auto_sync=False）",
        "operationId": "get_today_schedules_api_v1_schedules_today_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "auto_sync",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "如果数据库没有数据，是否自动同步Deputy",
              "default": true,
              "title": "Auto Sync"
            },
            "description": "如果数据库没有数据，是否自动同步Deputy"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ScheduleResponse"
                  },
                  "title": "Response Get Today Schedules Api V1 Schedules Today Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/schedules/{schedule_id}": {
      "get": {
        "tags": [
          "Schedules"
        ],
        "summary": "Get Schedule",
        "description": "获取指定排班详情",
        "operationId": "get_schedule_api_v1_schedules__schedule_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "schedule_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Schedule Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ScheduleResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Schedules"
        ],
        "summary": "Update Schedule",
        "description": "更新排班信息\n\n可更新字段：driver_id, route, vehicle_rego, checkin_status\n\n**注意**:\n- 如果提供了 driver_id，会自动从 Driver 表中查找并更新 deputy_id, driver_name, amazon_id\n- confirm_status 不能通过此端点修改，必须使用 POST /schedules/{id}/confirm 端点",
        "operationId": "update_schedule_api_v1_schedules__schedule_id__put",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "schedule_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Schedule Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ScheduleUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ScheduleResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Schedules"
        ],
        "summary": "Delete Schedule",
        "description": "删除排班",
        "operationId": "delete_schedule_api_v1_schedules__schedule_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "schedule_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Schedule Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/schedules/sync-date": {
      "post": {
        "tags": [
          "Schedules"
        ],
        "summary": "Sync Specific Date",
        "description": "手动同步指定日期的Deputy排班数据",
        "operationId": "sync_specific_date_api_v1_schedules_sync_date_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "sync_date",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date",
              "description": "要同步的日期",
              "title": "Sync Date"
            },
            "description": "要同步的日期"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/schedules/sync-today": {
      "post": {
        "tags": [
          "Schedules"
        ],
        "summary": "Sync Today",
        "description": "手动同步今天的Deputy排班数据",
        "operationId": "sync_today_api_v1_schedules_sync_today_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/schedules/import-routes": {
      "post": {
        "tags": [
          "Schedules"
        ],
        "summary": "Import Routes",
        "description": "上传 Amazon route 文件并自动匹配更新排班的 route 字段\n\n- **file**: Amazon route Excel 文件 (.xlsx)\n- **import_date**: 要更新的排班日期（默认今天）\n\n**工作流程**:\n1. 解析 Excel 文件获取 route_code \u003C-\u003E transporter_id 映射\n2. 查询指定日期的所有排班\n3. 通过 schedule.amazon_id == transporter_id 匹配\n4. 批量更新匹配到的 schedule.route = route_code\n5. 返回详细的匹配和更新统计\n\n**必需字段**: Route code, Transporter ID",
        "operationId": "import_routes_api_v1_schedules_import_routes_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "import_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "description": "导入到哪一天的排班（默认今天）",
              "title": "Import Date"
            },
            "description": "导入到哪一天的排班（默认今天）"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_import_routes_api_v1_schedules_import_routes_post"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RouteImportResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/schedules/{schedule_id}/confirm": {
      "post": {
        "tags": [
          "Schedules"
        ],
        "summary": "Confirm Schedule",
        "description": "确认排班并发送SMS通知给司机\n\n**必填项检查**:\n- ✅ driver (amazon_id) - 司机的Amazon ID必须已分配\n- ✅ route - 路线必须已分配\n- ✅ vehicle_rego - 车辆必须已分配\n\n**功能**:\n1. 验证所有必填项都已分配（司机Amazon ID、路线、车辆）\n2. 更新 confirm_status 为 CONFIRMED\n3. 查找对应的Driver（通过deputy_id）\n4. 发送SMS通知给司机，包含：\n   - 司机姓名\n   - 路线 (route)\n   - 车辆 (vehicle_rego)\n   - 时间 (start_time ~ end_time)\n\n**SMS通知示例**:\n```\nHi John, your schedule confirmed!\nDate: 2025-12-30\nRoute: DBS7-01A\nVehicle: Van 10\nTime: 08:00 - 18:00\n```",
        "operationId": "confirm_schedule_api_v1_schedules__schedule_id__confirm_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "schedule_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Schedule Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ScheduleResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/assets/products": {
      "get": {
        "tags": [
          "Assets & Inventory"
        ],
        "summary": "List Products",
        "description": "List all products.",
        "operationId": "list_products_api_v1_assets_products_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ProductResponse"
                  },
                  "title": "Response List Products Api V1 Assets Products Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Assets & Inventory"
        ],
        "summary": "Create Product",
        "description": "Create new product.",
        "operationId": "create_product_api_v1_assets_products_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProductCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/assets/products/{product_id}": {
      "get": {
        "tags": [
          "Assets & Inventory"
        ],
        "summary": "Get Product",
        "description": "Get product by ID.",
        "operationId": "get_product_api_v1_assets_products__product_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "product_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Product Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Assets & Inventory"
        ],
        "summary": "Update Product",
        "description": "Update product.",
        "operationId": "update_product_api_v1_assets_products__product_id__put",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "product_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Product Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProductUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Assets & Inventory"
        ],
        "summary": "Delete Product",
        "description": "Delete product.",
        "operationId": "delete_product_api_v1_assets_products__product_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "product_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Product Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/assets/products/{product_id}/inventory": {
      "get": {
        "tags": [
          "Assets & Inventory"
        ],
        "summary": "List Product Inventory",
        "description": "List inventory records for a product.",
        "operationId": "list_product_inventory_api_v1_assets_products__product_id__inventory_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "product_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Product Id"
            }
          },
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ProductInventoryResponse"
                  },
                  "title": "Response List Product Inventory Api V1 Assets Products  Product Id  Inventory Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/assets/inventory": {
      "post": {
        "tags": [
          "Assets & Inventory"
        ],
        "summary": "Add Inventory",
        "description": "Add inventory (stock purchase).",
        "operationId": "add_inventory_api_v1_assets_inventory_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProductInventoryCreate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductInventoryResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/assets/inventory-changes": {
      "get": {
        "tags": [
          "Assets & Inventory"
        ],
        "summary": "List Inventory Changes",
        "description": "List all inventory changes (both IN and OUT).\n\n- change_type: \"IN\" for stock in (purchases), \"OUT\" for stock out (distributions)\n- Returns combined records from ProductInventory and ProductBorrow tables\n- Sorted by created_at descending (newest first)",
        "operationId": "list_inventory_changes_api_v1_assets_inventory_changes_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "product_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "title": "Product Id"
            }
          },
          {
            "name": "change_type",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "title": "Change Type"
            }
          },
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/InventoryChangeResponse"
                  },
                  "title": "Response List Inventory Changes Api V1 Assets Inventory Changes Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/assets/borrows": {
      "get": {
        "tags": [
          "Assets & Inventory"
        ],
        "summary": "List Borrows",
        "description": "List all distribution records with optional filters.",
        "operationId": "list_borrows_api_v1_assets_borrows_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "product_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "title": "Product Id"
            }
          },
          {
            "name": "driver_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "title": "Driver Id"
            }
          },
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ProductBorrowResponse"
                  },
                  "title": "Response List Borrows Api V1 Assets Borrows Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Assets & Inventory"
        ],
        "summary": "Create Borrow",
        "description": "Create distribution record (distribute product to driver or internal use).\n\n- driver_id is optional: can be internal use without specific driver\n- Automatically records operator information (current user)\n- Reduces available stock (no return tracking)",
        "operationId": "create_borrow_api_v1_assets_borrows_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProductBorrowCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductBorrowResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/assets/borrows/{borrow_id}": {
      "get": {
        "tags": [
          "Assets & Inventory"
        ],
        "summary": "Get Borrow",
        "description": "Get distribution record by ID.",
        "operationId": "get_borrow_api_v1_assets_borrows__borrow_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "borrow_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Borrow Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductBorrowResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/assets/products/{product_id}/borrows": {
      "get": {
        "tags": [
          "Assets & Inventory"
        ],
        "summary": "List Product Borrows",
        "description": "List all distribution records for a specific product.",
        "operationId": "list_product_borrows_api_v1_assets_products__product_id__borrows_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "product_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Product Id"
            }
          },
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ProductBorrowResponse"
                  },
                  "title": "Response List Product Borrows Api V1 Assets Products  Product Id  Borrows Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/assets/drivers/{driver_id}/borrows": {
      "get": {
        "tags": [
          "Assets & Inventory"
        ],
        "summary": "List Driver Borrows",
        "description": "List all items distributed to a specific driver.",
        "operationId": "list_driver_borrows_api_v1_assets_drivers__driver_id__borrows_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "driver_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Driver Id"
            }
          },
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ProductBorrowResponse"
                  },
                  "title": "Response List Driver Borrows Api V1 Assets Drivers  Driver Id  Borrows Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/settings/config": {
      "get": {
        "tags": [
          "System Settings"
        ],
        "summary": "Get System Config",
        "description": "获取系统配置（所有用户可见）\n\n返回所有系统配置项的当前值：\n- admin_phone: 管理员提醒电话\n- driver_file_reminder_days: 司机文件临期提醒周期（10/15/30天）\n- daily_sms_time: 司机每日确认短信时间（HH:MM格式）\n- maintenance_booking_reminder_days: 保养预约提醒周期（10/15/30天）\n- next_maintenance_reminder_days: 下次保养临近提醒周期（10/15/30天）",
        "operationId": "get_system_config_api_v1_settings_config_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SystemConfigResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      },
      "put": {
        "tags": [
          "System Settings"
        ],
        "summary": "Update System Config",
        "description": "更新系统配置（批量更新）\n\n可以一次更新多个配置项，只需要提供需要更新的字段。\n\n配置说明：\n- admin_phone: 管理员提醒电话（用于接收系统通知）\n- driver_file_reminder_days: 司机文件临期提醒周期，建议值: 10, 15, 30天\n- daily_sms_time: 每日发送司机确认短信的时间（24小时制，如 \"08:00\"）\n- maintenance_booking_reminder_days: 保养预约提醒周期，建议值: 10, 15, 30天\n- next_maintenance_reminder_days: 下次保养临近提醒周期，建议值: 10, 15, 30天",
        "operationId": "update_system_config_api_v1_settings_config_put",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SystemConfigUpdate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SystemConfigResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      },
      "post": {
        "tags": [
          "System Settings"
        ],
        "summary": "Create System Config",
        "description": "创建/初始化系统配置\n\n首次设置系统配置，可以提供所有或部分配置项。\n未提供的配置项将使用默认值。\n\n配置说明：\n- admin_phone: 管理员提醒电话（用于接收系统通知）\n- driver_file_reminder_days: 司机文件临期提醒周期，建议值: 10, 15, 30天\n- daily_sms_time: 每日发送司机确认短信的时间（24小时制，如 \"08:00\"）\n- maintenance_booking_reminder_days: 保养预约提醒周期，建议值: 10, 15, 30天\n- next_maintenance_reminder_days: 下次保养临近提醒周期，建议值: 10, 15, 30天",
        "operationId": "create_system_config_api_v1_settings_config_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SystemConfigUpdate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SystemConfigResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/dashboard/stats": {
      "get": {
        "tags": [
          "Dashboard"
        ],
        "summary": "Get Dashboard Stats",
        "description": "Get dashboard statistics matching the UI layout.\n\nReturns:\n- Total Drivers (active count)\n- Total Vehicles (in use count)\n- Today's Schedules (active schedules)\n- Vehicles Need Attention (repair + unavailable)\n- Vehicle Status Overview (Available, Need Repair, Unavailable, In Use)\n- Driver Status Overview (Active, Inactive, Total)",
        "operationId": "get_dashboard_stats_api_v1_dashboard_stats_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/dashboard/alerts": {
      "get": {
        "tags": [
          "Dashboard"
        ],
        "summary": "Get Dashboard Alerts",
        "description": "Get dashboard alerts that need attention.",
        "operationId": "get_dashboard_alerts_api_v1_dashboard_alerts_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/supervise/employee": {
      "get": {
        "tags": [
          "Deputy Integration"
        ],
        "summary": "Get Deputy Employees",
        "description": "获取 Deputy 员工列表（包含头像等详细信息）\n\n返回员工列表，包含以下字段：\n- Id: Deputy 员工 ID\n- DisplayName: 姓名\n- Email: 邮箱\n- Mobile: 手机号",
        "operationId": "get_deputy_employees_api_v1_supervise_employee_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "type": "object"
                  },
                  "type": "array",
                  "title": "Response Get Deputy Employees Api V1 Supervise Employee Get"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/supervise/employee/{employee_id}": {
      "get": {
        "tags": [
          "Deputy Integration"
        ],
        "summary": "Get Deputy Employee",
        "description": "获取单个 Deputy 员工详情\n\n- **employee_id**: Deputy 员工 ID",
        "operationId": "get_deputy_employee_api_v1_supervise_employee__employee_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "employee_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Employee Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Get Deputy Employee Api V1 Supervise Employee  Employee Id  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/supervise/sync-employees": {
      "post": {
        "tags": [
          "Deputy Integration"
        ],
        "summary": "Sync Deputy Employees",
        "description": "同步 Deputy 员工到系统驱动程序表\n\n将 Deputy 中的员工数据同步到本地 drivers 表",
        "operationId": "sync_deputy_employees_api_v1_supervise_sync_employees_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Sync Deputy Employees Api V1 Supervise Sync Employees Post"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/supervise/rosters": {
      "get": {
        "tags": [
          "Deputy Integration"
        ],
        "summary": "Get Rosters",
        "description": "获取指定日期范围的 Deputy roster 数据",
        "operationId": "get_rosters_api_v1_supervise_rosters_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "start_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Start Date"
            }
          },
          {
            "name": "end_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "End Date"
            }
          },
          {
            "name": "employee_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Employee Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Get Rosters Api V1 Supervise Rosters Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/supervise/rosters/preview": {
      "get": {
        "tags": [
          "Deputy Integration"
        ],
        "summary": "Preview Rosters",
        "description": "预览 Deputy rosters 数据（不写入数据库）\n\n**功能**:\n- 从 Deputy API 获取指定日期的 rosters\n- 匹配数据库中的 Driver（通过 deputy_id）\n- 显示每个 roster 的状态 (ready/exists/no_driver)\n- **不写入数据库**，**不显示 amazon_id**\n\n**返回**:\n- 简化的 roster 列表（司机名称、时间、状态）\n- 可同步数量统计",
        "operationId": "preview_rosters_api_v1_supervise_rosters_preview_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "query_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "description": "查询日期 (默认今天)",
              "title": "Query Date"
            },
            "description": "查询日期 (默认今天)"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RosterPreviewResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/supervise/rosters/sync": {
      "post": {
        "tags": [
          "Deputy Integration"
        ],
        "summary": "Sync Rosters",
        "description": "同步 Deputy rosters 到数据库\n\n**功能**:\n- 从 Deputy API 获取指定日期的 rosters\n- 匹配数据库中的 Driver（通过 deputy_id）\n- **从 Driver 表获取最新的 amazon_id 并同步到 Schedule**\n- 创建或更新 Schedule 记录\n- 返回同步统计和 amazon_id 信息\n\n**重要**:\n- 会自动从 Driver 表同步 amazon_id 到 Schedule\n- 如果 Driver 有 amazon_id，Schedule 也会被更新",
        "operationId": "sync_rosters_api_v1_supervise_rosters_sync_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "sync_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "description": "同步日期 (默认今天)",
              "title": "Sync Date"
            },
            "description": "同步日期 (默认今天)"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RosterSyncResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/files/upload": {
      "post": {
        "tags": [
          "File Management"
        ],
        "summary": "Upload File",
        "description": "上传文件到 MinIO/Wasabi 存储并保存到数据库\n\n- **file**: 要上传的文件\n- **folder**: 存储文件夹路径（可选，默认 \"uploads\"）\n\n返回数据库记录（包含ID）",
        "operationId": "upload_file_api_v1_files_upload_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_upload_file_api_v1_files_upload_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FileRecordResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/files/delete/{file_id}": {
      "delete": {
        "tags": [
          "File Management"
        ],
        "summary": "Delete File",
        "description": "从 MinIO/Wasabi 和数据库中删除文件\n\n- **file_id**: 数据库中的文件记录ID",
        "operationId": "delete_file_api_v1_files_delete__file_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "file_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "File Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/files/list": {
      "get": {
        "tags": [
          "File Management"
        ],
        "summary": "List Files",
        "description": "列出数据库中的所有文件记录\n\n- **folder**: 文件夹过滤（可选，例如 \"uploads\", \"drivers\"）\n\n返回文件记录列表（包含ID）",
        "operationId": "list_files_api_v1_files_list_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "folder",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Folder"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/FileRecordResponse"
                  },
                  "title": "Response List Files Api V1 Files List Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/files/batch-upload": {
      "post": {
        "tags": [
          "File Management"
        ],
        "summary": "Batch Upload Files",
        "description": "批量上传多个文件到 MinIO/Wasabi 存储并保存到数据库\n\n- **files**: 要上传的文件列表\n- **folder**: 存储文件夹路径（可选，默认 \"uploads\"）\n\n返回所有上传文件的数据库记录（包含ID）",
        "operationId": "batch_upload_files_api_v1_files_batch_upload_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_batch_upload_files_api_v1_files_batch_upload_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/files/batch-delete": {
      "post": {
        "tags": [
          "File Management"
        ],
        "summary": "Batch Delete Files",
        "description": "批量删除多个文件\n\n- **file_ids**: 要删除的文件记录ID列表",
        "operationId": "batch_delete_files_api_v1_files_batch_delete_post",
        "requestBody": {
          "content": {
            "application/x-www-form-urlencoded": {
              "schema": {
                "$ref": "#/components/schemas/Body_batch_delete_files_api_v1_files_batch_delete_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/files/download/{file_id}": {
      "get": {
        "tags": [
          "File Management"
        ],
        "summary": "View File",
        "description": "通过后端代理访问文件（带权限控制，在浏览器中显示）\n\n- **file_id**: 文件记录ID",
        "operationId": "view_file_api_v1_files_download__file_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "file_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "File Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/notifications/send": {
      "post": {
        "tags": [
          "Notifications (SMS & Email)"
        ],
        "summary": "Send Sms",
        "description": "Send SMS to a single recipient.\n\n**Permissions**: Requires authenticated user\n\n**Parameters**:\n- phone: Recipient phone number with country code (e.g., +61451728450)\n- message: SMS message content (max 1600 characters)\n\n**Returns**: Success status and provider information",
        "operationId": "send_sms_api_v1_notifications_send_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SendSMSRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SMSResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/notifications/send-bulk": {
      "post": {
        "tags": [
          "Notifications (SMS & Email)"
        ],
        "summary": "Send Bulk Sms",
        "description": "Send SMS to multiple recipients.\n\n**Permissions**: Requires authenticated user\n\n**Parameters**:\n- phones: List of recipient phone numbers with country codes\n- message: SMS message content (max 1600 characters)\n\n**Returns**: Statistics on sent/failed messages",
        "operationId": "send_bulk_sms_api_v1_notifications_send_bulk_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SendBulkSMSRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkSMSResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/notifications/sms/received": {
      "get": {
        "tags": [
          "Notifications (SMS & Email)"
        ],
        "summary": "Get Received Sms",
        "description": "Get received SMS messages from ClapSMS.\n\n**Permissions**: Requires authenticated user\n\n**Parameters**:\n- limit: Number of messages to retrieve per page (default: 10)\n- page: Page number (default: 1)\n\n**Returns**: List of received SMS messages with sender info and content\n\n**Note**: Only works with ClapSMS provider. Twilio does not support this feature.",
        "operationId": "get_received_sms_api_v1_notifications_sms_received_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 10,
              "title": "Limit"
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1,
              "title": "Page"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/notifications/sms/status": {
      "get": {
        "tags": [
          "Notifications (SMS & Email)"
        ],
        "summary": "Get Sms Service Status",
        "description": "Get SMS service configuration status.\n\n**Permissions**: Requires authenticated user\n\n**Returns**: Current SMS provider and service status",
        "operationId": "get_sms_service_status_api_v1_notifications_sms_status_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/notifications/email/send": {
      "post": {
        "tags": [
          "Notifications (SMS & Email)"
        ],
        "summary": "Send Email",
        "description": "Send email to a single recipient.\n\n**Permissions**: Requires authenticated user\n\n**📧 IMPORTANT - Email Configuration Required:**\nTo enable email sending, you MUST configure SMTP settings in `.env` file:\n\n```env\n# Email Service (SMTP)\nSMTP_HOST=smtp.gmail.com           # CHANGE THIS to your SMTP server\nSMTP_PORT=587                      # CHANGE THIS if using different port (e.g., 465 for SSL)\nSMTP_USER=your-email@gmail.com     # CHANGE THIS to your email address\nSMTP_PASSWORD=your-app-password    # CHANGE THIS to your email password or app password\nSMTP_FROM=noreply@dspsystem.com    # CHANGE THIS to your sender email\n```\n\n**For Gmail:**\n1. Enable 2FA on your Google account\n2. Generate App Password: https://myaccount.google.com/apppasswords\n3. Use the 16-character app password as SMTP_PASSWORD\n\n**For other providers:**\n- Outlook/Office365: smtp.office365.com:587\n- Yahoo: smtp.mail.yahoo.com:587\n- Custom SMTP: Contact your email provider\n\n**Parameters**:\n- to_email: Recipient email address\n- subject: Email subject line\n- body: Email content (plain text or HTML)\n- html: Set to true if body contains HTML\n- cc: Optional CC recipients\n- bcc: Optional BCC recipients\n\n**Returns**: Success status and message",
        "operationId": "send_email_api_v1_notifications_email_send_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SendEmailRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EmailResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/notifications/email/send-bulk": {
      "post": {
        "tags": [
          "Notifications (SMS & Email)"
        ],
        "summary": "Send Bulk Email",
        "description": "Send email to multiple recipients.\n\n**Permissions**: Requires authenticated user\n\n**📧 SMTP Configuration Required** - See `/email/send` endpoint documentation for setup instructions.\n\n**Parameters**:\n- recipients: List of recipient email addresses\n- subject: Email subject line\n- body: Email content (plain text or HTML)\n- html: Set to true if body contains HTML\n\n**Returns**: Statistics on sent/failed emails",
        "operationId": "send_bulk_email_api_v1_notifications_email_send_bulk_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SendBulkEmailRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkEmailResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/notifications/email/status": {
      "get": {
        "tags": [
          "Notifications (SMS & Email)"
        ],
        "summary": "Get Email Service Status",
        "description": "Get email service configuration status.\n\n**Permissions**: Requires authenticated user\n\n**Returns**: Current email service status and configuration hints\n\n**If disabled, configure in .env:**\n```env\nSMTP_HOST=smtp.gmail.com\nSMTP_PORT=587\nSMTP_USER=your-email@gmail.com\nSMTP_PASSWORD=your-app-password\nSMTP_FROM=noreply@dspsystem.com\n```",
        "operationId": "get_email_service_status_api_v1_notifications_email_status_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/notifications/status": {
      "get": {
        "tags": [
          "Notifications (SMS & Email)"
        ],
        "summary": "Get All Notification Services Status",
        "description": "Get overall notification services status.\n\n**Permissions**: Requires authenticated user\n\n**Returns**: Status of all notification services (SMS + Email)",
        "operationId": "get_all_notification_services_status_api_v1_notifications_status_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/notifications/webhook/sms": {
      "post": {
        "tags": [
          "Notifications (SMS & Email)"
        ],
        "summary": "Receive Sms Webhook",
        "description": "Webhook endpoint for receiving SMS from ClapSMS.\n\n**IMPORTANT**: This endpoint does NOT require authentication as it's called by external service.\n\n**Setup Instructions**:\n1. Go to ClapSMS Dashboard: https://clapsms.com/dashboard/docs/webhooks\n2. Set webhook URL to: `https://your-ngrok-url.ngrok-free.dev/api/v1/notifications/webhook/sms`\n3. ClapSMS will POST form data to this endpoint when messages are received\n\n**Expected Payload** (from ClapSMS - Form Data):\n```\ndata[device]=f82b651a26ab99bc\ndata[id]=35\ndata[message]=Hello\ndata[phone]=+61451728450\ndata[timestamp]=1767132162\nsecret=your_api_secret\ntype=sms\n```\n\n**Returns**: Success acknowledgment",
        "operationId": "receive_sms_webhook_api_v1_notifications_webhook_sms_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        }
      }
    },
    "/api/v1/notifications/sms/inbox": {
      "get": {
        "tags": [
          "Notifications (SMS & Email)"
        ],
        "summary": "Get Sms Inbox",
        "description": "Get received SMS messages from database (stored via webhook).\n\n**Permissions**: Requires authenticated user\n\n**Parameters**:\n- limit: Maximum number of messages to return (default: 50, max: 200)\n- offset: Number of messages to skip (for pagination)\n- unprocessed_only: If true, only return unprocessed messages\n\n**Returns**: List of received SMS messages with metadata",
        "operationId": "get_sms_inbox_api_v1_notifications_sms_inbox_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Offset"
            }
          },
          {
            "name": "unprocessed_only",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Unprocessed Only"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReceivedSMSListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/notifications/sms/inbox/{sms_id}/mark-processed": {
      "put": {
        "tags": [
          "Notifications (SMS & Email)"
        ],
        "summary": "Mark Sms Processed",
        "description": "Mark a received SMS as processed.\n\n**Permissions**: Requires authenticated user\n\n**Parameters**:\n- sms_id: ID of the received SMS message\n\n**Returns**: Updated SMS record",
        "operationId": "mark_sms_processed_api_v1_notifications_sms_inbox__sms_id__mark_processed_put",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "sms_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Sms Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReceivedSMSResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/notifications/sms/inbox/{sms_id}/process-confirmation": {
      "post": {
        "tags": [
          "Notifications (SMS & Email)"
        ],
        "summary": "Process Confirmation Manually",
        "description": "Manually process a received SMS as driver confirmation (Y/N).\n\n**Permissions**: Requires authenticated user\n\n**Parameters**:\n- sms_id: ID of the received SMS message\n\n**Workflow**:\n1. Retrieves the SMS from database\n2. Attempts to match phone number to a driver\n3. Finds today's schedule for the driver\n4. Updates schedule confirmation status based on message (Y=CONFIRMED, N=REJECTED)\n\n**Returns**: Processing result with schedule update details",
        "operationId": "process_confirmation_manually_api_v1_notifications_sms_inbox__sms_id__process_confirmation_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "sms_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Sms Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/inspections/": {
      "get": {
        "tags": [
          "Inspection Management"
        ],
        "summary": "List Inspections",
        "description": "获取 inspection 列表（支持多种过滤条件）\n\n**核心功能**：\n- 按日期查看某天所有 inspection\n- 按车辆查看 inspection 历史\n- 按司机查看 inspection 历史\n- 按状态过滤（待审核、通过、失败）\n- 日期范围查询\n\n**示例**：\n- 查看某天所有 inspection: `?inspection_date=2026-01-04`\n- 查看某车所有 inspection: `?vehicle_id=1`\n- 查看待审核的 inspection: `?inspection_status=pending&reviewed=false`\n- 日期范围: `?start_date=2026-01-01&end_date=2026-01-31`",
        "operationId": "list_inspections_api_v1_inspections__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "inspection_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "description": "按日期过滤（查看某天所有inspection）",
              "title": "Inspection Date"
            },
            "description": "按日期过滤（查看某天所有inspection）"
          },
          {
            "name": "vehicle_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "description": "按车辆过滤",
              "title": "Vehicle Id"
            },
            "description": "按车辆过滤"
          },
          {
            "name": "driver_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "description": "按司机过滤",
              "title": "Driver Id"
            },
            "description": "按司机过滤"
          },
          {
            "name": "inspection_status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "pattern": "^(pending|passed|failed)$"
                },
                {
                  "type": "null"
                }
              ],
              "description": "按状态过滤（pending/passed/failed）",
              "title": "Inspection Status"
            },
            "description": "按状态过滤（pending/passed/failed）"
          },
          {
            "name": "reviewed",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "description": "按审核状态过滤",
              "title": "Reviewed"
            },
            "description": "按审核状态过滤"
          },
          {
            "name": "start_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "description": "开始日期（日期范围查询）",
              "title": "Start Date"
            },
            "description": "开始日期（日期范围查询）"
          },
          {
            "name": "end_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "description": "结束日期（日期范围查询）",
              "title": "End Date"
            },
            "description": "结束日期（日期范围查询）"
          },
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 500,
              "minimum": 1,
              "default": 100,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/VehicleInspectionResponse"
                  },
                  "title": "Response List Inspections Api V1 Inspections  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/inspections/stats": {
      "get": {
        "tags": [
          "Inspection Management"
        ],
        "summary": "Get Inspection Stats",
        "description": "获取 inspection 统计数据\n\n**返回**：\n- total: 总数\n- pending: 待审核数量\n- passed: 通过数量\n- failed: 失败数量\n- pass_rate: 通过率（已审核中通过的比例）\n- reviewed_count: 已审核总数\n\n**示例**：\n- 查看某天统计: `?inspection_date=2026-01-04`\n- 查看某车统计: `?vehicle_id=1`\n- 日期范围统计: `?start_date=2026-01-01&end_date=2026-01-31`",
        "operationId": "get_inspection_stats_api_v1_inspections_stats_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "inspection_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "description": "查看某天的统计",
              "title": "Inspection Date"
            },
            "description": "查看某天的统计"
          },
          {
            "name": "vehicle_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "description": "查看某车的统计",
              "title": "Vehicle Id"
            },
            "description": "查看某车的统计"
          },
          {
            "name": "driver_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "description": "查看某司机的统计",
              "title": "Driver Id"
            },
            "description": "查看某司机的统计"
          },
          {
            "name": "start_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "description": "统计范围开始日期",
              "title": "Start Date"
            },
            "description": "统计范围开始日期"
          },
          {
            "name": "end_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "description": "统计范围结束日期",
              "title": "End Date"
            },
            "description": "统计范围结束日期"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/inspections/{inspection_id}": {
      "get": {
        "tags": [
          "Inspection Management"
        ],
        "summary": "Get Inspection Detail",
        "description": "获取单个 inspection 详情（扁平化结构 + 简化的上一次inspection）\n\n**返回完整信息**：\n- 当前inspection的所有字段（包含driver_name）\n- previous: 上一次inspection的简化信息（只包含日期、里程、照片、司机名）",
        "operationId": "get_inspection_detail_api_v1_inspections__inspection_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "inspection_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Inspection Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VehicleInspectionDetailResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/inspections/{inspection_id}/review": {
      "post": {
        "tags": [
          "Inspection Management"
        ],
        "summary": "Review Inspection",
        "description": "审核 inspection（管理员）\n\n**功能**：\n- 设置审核状态（0=pending, 1=passed, 2=failed）\n- 添加管理员备注\n- 标记为已审核\n\n**限制**：\n- 管理员不能修改 inspection 内容（日期、里程数、照片）\n- 只能审核和添加备注",
        "operationId": "review_inspection_api_v1_inspections__inspection_id__review_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "inspection_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Inspection Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VehicleInspectionReview"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VehicleInspectionResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/inspections/batch-review": {
      "post": {
        "tags": [
          "Inspection Management"
        ],
        "summary": "Batch Review Inspections",
        "description": "批量审核 inspection\n\n**功能**：\n- 批量设置多个 inspection 的状态\n- 批量添加管理员备注\n\n**示例**：\n```\nPOST /api/v1/inspections/batch-review?inspection_ids=1&inspection_ids=2&inspection_ids=3&inspection_status=passed&admin_notes=All good\n```",
        "operationId": "batch_review_inspections_api_v1_inspections_batch_review_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "inspection_ids",
            "in": "query",
            "required": true,
            "schema": {
              "type": "array",
              "items": {
                "type": "integer"
              },
              "description": "Inspection ID 列表",
              "title": "Inspection Ids"
            },
            "description": "Inspection ID 列表"
          },
          {
            "name": "inspection_status",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "pattern": "^(pending|passed|failed)$",
              "description": "批量设置的状态（pending/passed/failed）",
              "title": "Inspection Status"
            },
            "description": "批量设置的状态（pending/passed/failed）"
          },
          {
            "name": "admin_notes",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "批量添加的管理员备注",
              "title": "Admin Notes"
            },
            "description": "批量添加的管理员备注"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/inspections/by-date/{inspection_date}": {
      "get": {
        "tags": [
          "Inspection Management"
        ],
        "summary": "Get Inspections By Date",
        "description": "获取某天的所有 inspection（带完整照片 URL）\n\n**专门优化的端点**：\n- 快速查看某天所有 inspection\n- 包含完整照片 URL\n- 包含里程数数据",
        "operationId": "get_inspections_by_date_api_v1_inspections_by_date__inspection_date__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "inspection_date",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date",
              "title": "Inspection Date"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/VehicleInspectionPhotoResponse"
                  },
                  "title": "Response Get Inspections By Date Api V1 Inspections By Date  Inspection Date  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/inspections/by-vehicle/{vehicle_id}": {
      "get": {
        "tags": [
          "Inspection Management"
        ],
        "summary": "Get Inspections By Vehicle",
        "description": "获取某车辆的所有 inspection 历史（带完整照片 URL）\n\n**专门优化的端点**：\n- 查看车辆 inspection 历史\n- 支持日期范围过滤\n- 包含里程数趋势数据",
        "operationId": "get_inspections_by_vehicle_api_v1_inspections_by_vehicle__vehicle_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "vehicle_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Vehicle Id"
            }
          },
          {
            "name": "start_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "description": "开始日期",
              "title": "Start Date"
            },
            "description": "开始日期"
          },
          {
            "name": "end_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "description": "结束日期",
              "title": "End Date"
            },
            "description": "结束日期"
          },
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "minimum": 1,
              "default": 50,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/VehicleInspectionPhotoResponse"
                  },
                  "title": "Response Get Inspections By Vehicle Api V1 Inspections By Vehicle  Vehicle Id  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/tasks/send-schedule-reminders": {
      "post": {
        "tags": [
          "Manual Tasks"
        ],
        "summary": "Manual Send Schedule Reminders",
        "description": "手动触发：发送排班提醒短信（第1次短信）\n\n**自动执行时间**: 每天 04:00 AM\n\n**功能**:\n- 查找指定日期的所有排班（未发送提醒的）\n- 发送简单提醒短信：\"你有排班 for [日期]\"\n- 不包含路线和车辆信息\n- 设置 reminder_sms_sent = True\n\n**短信内容**: \"Hi {name}, you have a shift scheduled for {date}, Please reply Y to confirm or N to decline.\"\n\n**返回**: 发送统计（sent, failed, skipped）",
        "operationId": "manual_send_schedule_reminders_api_v1_tasks_send_schedule_reminders_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "target_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "description": "目标日期（默认今天）",
              "title": "Target Date"
            },
            "description": "目标日期（默认今天）"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Manual Send Schedule Reminders Api V1 Tasks Send Schedule Reminders Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/tasks/check-document-expiry": {
      "post": {
        "tags": [
          "Manual Tasks"
        ],
        "summary": "Manual Check Document Expiry",
        "description": "手动触发：检查司机证件到期\n\n**自动执行时间**: 每天 09:00 AM\n\n**功能**:\n- 检查所有司机的驾照和签证到期日期\n- 如果在提醒天数范围内（默认15天）且未提醒过，发送SMS给管理员\n- 设置 license_reminder_sent / visa_reminder_sent = True\n\n**提醒范围**: today ≤ expiry_date ≤ today + 15天\n\n**返回**: 提醒统计（license_alerts, visa_alerts）",
        "operationId": "manual_check_document_expiry_api_v1_tasks_check_document_expiry_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Manual Check Document Expiry Api V1 Tasks Check Document Expiry Post"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/tasks/check-vehicle-maintenance": {
      "post": {
        "tags": [
          "Manual Tasks"
        ],
        "summary": "Manual Check Vehicle Maintenance",
        "description": "手动触发：检查车辆维护到期\n\n**自动执行时间**: 每天 10:00 AM\n\n**功能**:\n- 查找今天需要维护的车辆（next_maintenance_date == today）\n- 发送邮件给Workshop\n- 发送SMS给管理员\n\n**重要**: 只检查今天到期的车辆，不提前发送\n\n**返回**: 维护提醒统计（emails_sent, sms_sent）",
        "operationId": "manual_check_vehicle_maintenance_api_v1_tasks_check_vehicle_maintenance_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Manual Check Vehicle Maintenance Api V1 Tasks Check Vehicle Maintenance Post"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/tasks/check-low-stock": {
      "post": {
        "tags": [
          "Manual Tasks"
        ],
        "summary": "Manual Check Low Stock",
        "description": "手动触发：检查低库存产品\n\n**自动执行时间**: 每天 11:00 AM\n\n**功能**:\n- 查找库存低于阈值的产品（available_stock \u003C= min_stock_threshold）\n- 发送SMS给管理员（手动触发不检查是否已发送过警报）\n- 注意：手动调用不会设置 low_stock_alert_sent 标志\n\n**返回**: 低库存警报统计（alerts_sent）",
        "operationId": "manual_check_low_stock_api_v1_tasks_check_low_stock_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Manual Check Low Stock Api V1 Tasks Check Low Stock Post"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/tasks/reset-vehicle-status": {
      "post": {
        "tags": [
          "Manual Tasks"
        ],
        "summary": "Manual Reset Vehicle Status",
        "description": "手动触发：重置所有车辆状态为 not-in-use\n\n**自动执行时间**: 每天 00:00 AM (午夜)\n\n**功能**:\n- 将所有车辆的 status 重置为 \"not-in-use\"\n- 通常在每日开始时执行\n\n**返回**: 重置统计（vehicles_reset）",
        "operationId": "manual_reset_vehicle_status_api_v1_tasks_reset_vehicle_status_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Manual Reset Vehicle Status Api V1 Tasks Reset Vehicle Status Post"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/tasks/run-all-tasks": {
      "post": {
        "tags": [
          "Manual Tasks"
        ],
        "summary": "Manual Run All Tasks",
        "description": "手动触发：运行所有自动化任务（按顺序）\n\n**执行顺序**:\n1. 发送排班提醒（04:00）\n2. 检查证件到期（09:00）\n3. 检查车辆维护（10:00）\n4. 检查低库存（11:00）\n\n**注意**:\n- 不包括同步排班（请使用 POST /api/v1/schedules/sync-today）\n- 不包括重置车辆状态（通常在午夜执行）\n\n**返回**: 所有任务的执行结果",
        "operationId": "manual_run_all_tasks_api_v1_tasks_run_all_tasks_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Manual Run All Tasks Api V1 Tasks Run All Tasks Post"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/": {
      "get": {
        "summary": "Root",
        "description": "Root endpoint.",
        "operationId": "root__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "Body_batch_delete_files_api_v1_files_batch_delete_post": {
        "properties": {
          "file_ids": {
            "items": {
              "type": "integer"
            },
            "type": "array",
            "title": "File Ids"
          }
        },
        "type": "object",
        "required": [
          "file_ids"
        ],
        "title": "Body_batch_delete_files_api_v1_files_batch_delete_post"
      },
      "Body_batch_upload_files_api_v1_files_batch_upload_post": {
        "properties": {
          "files": {
            "items": {
              "type": "string",
              "format": "binary"
            },
            "type": "array",
            "title": "Files"
          },
          "folder": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Folder",
            "default": "uploads"
          }
        },
        "type": "object",
        "required": [
          "files"
        ],
        "title": "Body_batch_upload_files_api_v1_files_batch_upload_post"
      },
      "Body_import_amazon_ids_api_v1_drivers_import_amazon_ids_post": {
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File"
          }
        },
        "type": "object",
        "required": [
          "file"
        ],
        "title": "Body_import_amazon_ids_api_v1_drivers_import_amazon_ids_post"
      },
      "Body_import_routes_api_v1_schedules_import_routes_post": {
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File"
          }
        },
        "type": "object",
        "required": [
          "file"
        ],
        "title": "Body_import_routes_api_v1_schedules_import_routes_post"
      },
      "Body_update_driver_api_v1_drivers__driver_id__put": {
        "properties": {
          "deputy_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Deputy Id"
          },
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "phone": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Phone"
          },
          "email": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Email"
          },
          "address": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Address"
          },
          "amazon_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Amazon Id"
          },
          "is_active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Active"
          },
          "license_file_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "License File Url"
          },
          "license_number": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "License Number"
          },
          "license_expiry_date": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "License Expiry Date"
          },
          "license_files": {
            "anyOf": [
              {
                "items": {
                  "type": "string",
                  "format": "binary"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "License Files"
          },
          "visa_file_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Visa File Url"
          },
          "visa_number": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Visa Number"
          },
          "visa_expiry_date": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Visa Expiry Date"
          },
          "visa_files": {
            "anyOf": [
              {
                "items": {
                  "type": "string",
                  "format": "binary"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Visa Files"
          }
        },
        "type": "object",
        "title": "Body_update_driver_api_v1_drivers__driver_id__put"
      },
      "Body_upload_file_api_v1_files_upload_post": {
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File"
          },
          "folder": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Folder",
            "default": "uploads"
          }
        },
        "type": "object",
        "required": [
          "file"
        ],
        "title": "Body_upload_file_api_v1_files_upload_post"
      },
      "BulkEmailResponse": {
        "properties": {
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "sent": {
            "type": "integer",
            "title": "Sent"
          },
          "failed": {
            "type": "integer",
            "title": "Failed"
          }
        },
        "type": "object",
        "required": [
          "total",
          "sent",
          "failed"
        ],
        "title": "BulkEmailResponse",
        "description": "Response model for bulk email operations."
      },
      "BulkSMSResponse": {
        "properties": {
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "sent": {
            "type": "integer",
            "title": "Sent"
          },
          "failed": {
            "type": "integer",
            "title": "Failed"
          },
          "provider": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Provider"
          }
        },
        "type": "object",
        "required": [
          "total",
          "sent",
          "failed"
        ],
        "title": "BulkSMSResponse",
        "description": "Response model for bulk SMS operations."
      },
      "CheckinStatus": {
        "type": "string",
        "enum": [
          "not_checked_in",
          "checked_in"
        ],
        "title": "CheckinStatus",
        "description": "Driver check-in status."
      },
      "DriverCreate": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Name",
            "description": "Driver name (required)"
          },
          "amazon_id": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Amazon Id",
            "description": "Amazon ID (optional)"
          },
          "password": {
            "anyOf": [
              {
                "type": "string",
                "minLength": 6
              },
              {
                "type": "null"
              }
            ],
            "title": "Password",
            "description": "Login password (optional, min 6 characters if provided)"
          },
          "phone": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 20
              },
              {
                "type": "null"
              }
            ],
            "title": "Phone"
          },
          "email": {
            "anyOf": [
              {
                "type": "string",
                "format": "email"
              },
              {
                "type": "null"
              }
            ],
            "title": "Email"
          },
          "address": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Address"
          },
          "deputy_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Deputy Id"
          }
        },
        "type": "object",
        "required": [
          "name"
        ],
        "title": "DriverCreate",
        "description": "Schema for creating a driver - only name is required, credentials are optional."
      },
      "DriverInspectionCreate": {
        "properties": {
          "vehicle_id": {
            "type": "integer",
            "title": "Vehicle Id"
          },
          "mileage_at_inspection": {
            "type": "integer",
            "title": "Mileage At Inspection",
            "description": "Vehicle mileage at time of inspection (required)"
          },
          "inspection_urls": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Inspection Urls",
            "description": "Array of inspection photo URLs from /api/v1/files/batch-upload"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes",
            "description": "Inspection notes"
          }
        },
        "type": "object",
        "required": [
          "vehicle_id",
          "mileage_at_inspection"
        ],
        "title": "DriverInspectionCreate",
        "description": "Schema for driver app to create inspection (driver_id and date auto-filled)."
      },
      "DriverInspectionUpdate": {
        "properties": {
          "mileage_at_inspection": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mileage At Inspection"
          },
          "inspection_urls": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Inspection Urls"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes"
          }
        },
        "type": "object",
        "title": "DriverInspectionUpdate",
        "description": "Schema for driver app to update inspection."
      },
      "DriverLogin": {
        "properties": {
          "amazon_id": {
            "type": "string",
            "title": "Amazon Id",
            "description": "Driver Amazon ID"
          },
          "password": {
            "type": "string",
            "title": "Password",
            "description": "Driver password"
          }
        },
        "type": "object",
        "required": [
          "amazon_id",
          "password"
        ],
        "title": "DriverLogin",
        "description": "Schema for driver app login using Amazon ID."
      },
      "DriverResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "name": {
            "type": "string",
            "title": "Name"
          },
          "deputy_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Deputy Id"
          },
          "amazon_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Amazon Id"
          },
          "phone": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Phone"
          },
          "email": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Email"
          },
          "address": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Address"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "default": false
          },
          "can_login": {
            "type": "boolean",
            "title": "Can Login",
            "default": false
          },
          "has_password": {
            "type": "boolean",
            "title": "Has Password",
            "default": false
          },
          "has_amazon_credentials": {
            "type": "boolean",
            "title": "Has Amazon Credentials",
            "default": false
          },
          "license_file_url": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "License File Url",
            "default": []
          },
          "license_number": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "License Number"
          },
          "license_expiry_date": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "License Expiry Date"
          },
          "license_reminder_sent": {
            "type": "boolean",
            "title": "License Reminder Sent",
            "default": false
          },
          "visa_file_url": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Visa File Url",
            "default": []
          },
          "visa_number": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Visa Number"
          },
          "visa_expiry_date": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Visa Expiry Date"
          },
          "visa_reminder_sent": {
            "type": "boolean",
            "title": "Visa Reminder Sent",
            "default": false
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "name",
          "created_at",
          "updated_at"
        ],
        "title": "DriverResponse",
        "description": "Schema for driver response - uses flexible validation to handle legacy data."
      },
      "DriverSetPassword": {
        "properties": {
          "password": {
            "type": "string",
            "minLength": 6,
            "title": "Password",
            "description": "New password (min 6 characters)"
          }
        },
        "type": "object",
        "required": [
          "password"
        ],
        "title": "DriverSetPassword",
        "description": "Schema for setting/resetting driver password."
      },
      "DriverToken": {
        "properties": {
          "access_token": {
            "type": "string",
            "title": "Access Token"
          },
          "token_type": {
            "type": "string",
            "title": "Token Type",
            "default": "bearer"
          },
          "driver": {
            "$ref": "#/components/schemas/DriverResponse"
          }
        },
        "type": "object",
        "required": [
          "access_token",
          "driver"
        ],
        "title": "DriverToken",
        "description": "Schema for driver authentication token response."
      },
      "EmailResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "message": {
            "type": "string",
            "title": "Message"
          }
        },
        "type": "object",
        "required": [
          "success",
          "message"
        ],
        "title": "EmailResponse",
        "description": "Response model for email operations."
      },
      "FileRecordResponse": {
        "properties": {
          "object_key": {
            "type": "string",
            "title": "Object Key",
            "description": "MinIO/Wasabi object key"
          },
          "file_url": {
            "type": "string",
            "title": "File Url",
            "description": "Full URL to access the file"
          },
          "file_name": {
            "type": "string",
            "title": "File Name",
            "description": "Original file name"
          },
          "file_size": {
            "type": "integer",
            "minimum": 0,
            "title": "File Size",
            "description": "File size in bytes"
          },
          "content_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Content Type",
            "description": "MIME type"
          },
          "folder": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Folder",
            "description": "Folder path in bucket"
          },
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "uploaded_by": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Uploaded By"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "object_key",
          "file_url",
          "file_name",
          "file_size",
          "id",
          "created_at",
          "updated_at"
        ],
        "title": "FileRecordResponse",
        "description": "Schema for file record response."
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "InspectionPhotoWithDate": {
        "properties": {
          "date": {
            "type": "string",
            "format": "date",
            "title": "Date"
          },
          "inspection_url": {
            "type": "string",
            "title": "Inspection Url"
          }
        },
        "type": "object",
        "required": [
          "date",
          "inspection_url"
        ],
        "title": "InspectionPhotoWithDate",
        "description": "Inspection photo with date information."
      },
      "InventoryChangeResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "product_id": {
            "type": "integer",
            "title": "Product Id"
          },
          "product_name": {
            "type": "string",
            "title": "Product Name"
          },
          "change_type": {
            "type": "string",
            "title": "Change Type"
          },
          "quantity": {
            "type": "integer",
            "title": "Quantity"
          },
          "change_date": {
            "type": "string",
            "format": "date",
            "title": "Change Date"
          },
          "driver_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Driver Id"
          },
          "driver_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Driver Name"
          },
          "operated_by_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Operated By Id"
          },
          "operated_by_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Operated By Name"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "product_id",
          "product_name",
          "change_type",
          "quantity",
          "change_date",
          "created_at"
        ],
        "title": "InventoryChangeResponse",
        "description": "Unified inventory change record (both IN and OUT)."
      },
      "PreviousInspectionSummary": {
        "properties": {
          "inspection_date": {
            "type": "string",
            "format": "date",
            "title": "Inspection Date"
          },
          "mileage_at_inspection": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mileage At Inspection"
          },
          "photo_full_urls": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Photo Full Urls",
            "default": []
          },
          "driver_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Driver Name"
          }
        },
        "type": "object",
        "required": [
          "inspection_date",
          "mileage_at_inspection"
        ],
        "title": "PreviousInspectionSummary",
        "description": "Simplified previous inspection data (only key fields)."
      },
      "ProductBorrowCreate": {
        "properties": {
          "quantity": {
            "type": "integer",
            "exclusiveMinimum": 0,
            "title": "Quantity",
            "default": 1
          },
          "borrow_date": {
            "type": "string",
            "format": "date",
            "title": "Borrow Date"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes"
          },
          "product_id": {
            "type": "integer",
            "title": "Product Id"
          },
          "driver_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Driver Id"
          }
        },
        "type": "object",
        "required": [
          "borrow_date",
          "product_id"
        ],
        "title": "ProductBorrowCreate",
        "description": "Schema for creating borrow/distribution record."
      },
      "ProductBorrowResponse": {
        "properties": {
          "quantity": {
            "type": "integer",
            "exclusiveMinimum": 0,
            "title": "Quantity",
            "default": 1
          },
          "borrow_date": {
            "type": "string",
            "format": "date",
            "title": "Borrow Date"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes"
          },
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "product_id": {
            "type": "integer",
            "title": "Product Id"
          },
          "driver_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Driver Id"
          },
          "operated_by_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Operated By Id"
          },
          "operated_by_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Operated By Name"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "borrow_date",
          "id",
          "product_id",
          "driver_id",
          "operated_by_id",
          "operated_by_name",
          "created_at",
          "updated_at"
        ],
        "title": "ProductBorrowResponse",
        "description": "Schema for borrow response."
      },
      "ProductCreate": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "min_stock_threshold": {
            "type": "integer",
            "minimum": 0,
            "title": "Min Stock Threshold",
            "default": 0
          },
          "available_stock": {
            "type": "integer",
            "minimum": 0,
            "title": "Available Stock",
            "description": "Initial stock quantity",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "name"
        ],
        "title": "ProductCreate",
        "description": "Schema for creating a product."
      },
      "ProductInventoryCreate": {
        "properties": {
          "quantity": {
            "type": "integer",
            "exclusiveMinimum": 0,
            "title": "Quantity"
          },
          "purchase_date": {
            "type": "string",
            "format": "date",
            "title": "Purchase Date"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes"
          },
          "product_id": {
            "type": "integer",
            "title": "Product Id"
          }
        },
        "type": "object",
        "required": [
          "quantity",
          "purchase_date",
          "product_id"
        ],
        "title": "ProductInventoryCreate",
        "description": "Schema for creating inventory record."
      },
      "ProductInventoryResponse": {
        "properties": {
          "quantity": {
            "type": "integer",
            "exclusiveMinimum": 0,
            "title": "Quantity"
          },
          "purchase_date": {
            "type": "string",
            "format": "date",
            "title": "Purchase Date"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes"
          },
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "product_id": {
            "type": "integer",
            "title": "Product Id"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "quantity",
          "purchase_date",
          "id",
          "product_id",
          "created_at",
          "updated_at"
        ],
        "title": "ProductInventoryResponse",
        "description": "Schema for inventory response."
      },
      "ProductResponse": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "min_stock_threshold": {
            "type": "integer",
            "minimum": 0,
            "title": "Min Stock Threshold",
            "default": 0
          },
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "available_stock": {
            "type": "integer",
            "title": "Available Stock"
          },
          "low_stock_alert_sent": {
            "type": "boolean",
            "title": "Low Stock Alert Sent"
          },
          "needs_purchase": {
            "type": "boolean",
            "title": "Needs Purchase",
            "default": false
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "name",
          "id",
          "available_stock",
          "low_stock_alert_sent",
          "created_at",
          "updated_at"
        ],
        "title": "ProductResponse",
        "description": "Schema for product response."
      },
      "ProductUpdate": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "min_stock_threshold": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": 0
              },
              {
                "type": "null"
              }
            ],
            "title": "Min Stock Threshold"
          }
        },
        "type": "object",
        "title": "ProductUpdate",
        "description": "Schema for updating product."
      },
      "ReceivedSMSListResponse": {
        "properties": {
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "items": {
            "items": {
              "$ref": "#/components/schemas/ReceivedSMSResponse"
            },
            "type": "array",
            "title": "Items"
          }
        },
        "type": "object",
        "required": [
          "total",
          "items"
        ],
        "title": "ReceivedSMSListResponse",
        "description": "Schema for list of received SMS."
      },
      "ReceivedSMSResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "sender": {
            "type": "string",
            "title": "Sender"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "device_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Device Id"
          },
          "received_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Received At"
          },
          "external_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "External Id"
          },
          "is_processed": {
            "type": "boolean",
            "title": "Is Processed"
          },
          "processed_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Processed At"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "sender",
          "message",
          "device_id",
          "received_at",
          "external_id",
          "is_processed",
          "processed_at",
          "created_at",
          "updated_at"
        ],
        "title": "ReceivedSMSResponse",
        "description": "Schema for ReceivedSMS response."
      },
      "RosterPreviewItem": {
        "properties": {
          "roster_id": {
            "type": "string",
            "title": "Roster Id",
            "description": "Deputy roster ID",
            "example": "3039"
          },
          "deputy_id": {
            "type": "string",
            "title": "Deputy Id",
            "description": "Deputy employee ID",
            "example": "16"
          },
          "driver_name": {
            "type": "string",
            "title": "Driver Name",
            "description": "Driver name",
            "example": "Rocky"
          },
          "start_time": {
            "type": "string",
            "title": "Start Time",
            "description": "Shift start time (localized)",
            "example": "2025-12-29T07:45:00+11:00"
          },
          "end_time": {
            "type": "string",
            "title": "End Time",
            "description": "Shift end time (localized)",
            "example": "2025-12-29T17:45:00+11:00"
          },
          "status": {
            "type": "string",
            "enum": [
              "ready",
              "exists",
              "no_driver"
            ],
            "title": "Status",
            "description": "Sync status: ready (可同步), exists (已存在,会更新), no_driver (找不到driver)",
            "example": "ready"
          }
        },
        "type": "object",
        "required": [
          "roster_id",
          "deputy_id",
          "driver_name",
          "start_time",
          "end_time",
          "status"
        ],
        "title": "RosterPreviewItem",
        "description": "Preview item for a single roster from Deputy."
      },
      "RosterPreviewResponse": {
        "properties": {
          "date": {
            "type": "string",
            "title": "Date",
            "description": "Query date",
            "example": "2025-12-29"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total rosters from Deputy",
            "example": 22
          },
          "can_sync": {
            "type": "integer",
            "title": "Can Sync",
            "description": "Number of rosters that can be synced",
            "example": 22
          },
          "rosters": {
            "items": {
              "$ref": "#/components/schemas/RosterPreviewItem"
            },
            "type": "array",
            "title": "Rosters",
            "description": "List of roster preview items"
          }
        },
        "type": "object",
        "required": [
          "date",
          "total",
          "can_sync",
          "rosters"
        ],
        "title": "RosterPreviewResponse",
        "description": "Response for roster preview endpoint."
      },
      "RosterSyncResponse": {
        "properties": {
          "date": {
            "type": "string",
            "title": "Date",
            "description": "Synced date",
            "example": "2025-12-29"
          },
          "created": {
            "type": "integer",
            "title": "Created",
            "description": "Number of schedules created",
            "example": 0
          },
          "updated": {
            "type": "integer",
            "title": "Updated",
            "description": "Number of schedules updated",
            "example": 22
          },
          "skipped": {
            "type": "integer",
            "title": "Skipped",
            "description": "Number of rosters skipped",
            "example": 0
          },
          "updated_schedules": {
            "items": {
              "$ref": "#/components/schemas/SyncedScheduleInfo"
            },
            "type": "array",
            "title": "Updated Schedules",
            "description": "List of successfully updated schedules"
          },
          "skipped_rosters": {
            "items": {
              "$ref": "#/components/schemas/SkippedRosterInfo"
            },
            "type": "array",
            "title": "Skipped Rosters",
            "description": "List of skipped rosters"
          }
        },
        "type": "object",
        "required": [
          "date",
          "created",
          "updated",
          "skipped"
        ],
        "title": "RosterSyncResponse",
        "description": "Response for roster sync endpoint."
      },
      "RouteImportResponse": {
        "properties": {
          "file_name": {
            "type": "string",
            "title": "File Name",
            "description": "Original filename",
            "example": "Routes_DVT4_2025-12-04.xlsx"
          },
          "import_date": {
            "type": "string",
            "title": "Import Date",
            "description": "Date of schedules being updated",
            "example": "2025-12-26"
          },
          "total_routes_in_file": {
            "type": "integer",
            "title": "Total Routes In File",
            "description": "Total routes parsed from file",
            "example": 20
          },
          "total_schedules_today": {
            "type": "integer",
            "title": "Total Schedules Today",
            "description": "Total schedules for the date",
            "example": 25
          },
          "matched_and_updated": {
            "type": "integer",
            "title": "Matched And Updated",
            "description": "Number of schedules successfully updated",
            "example": 18
          },
          "not_matched": {
            "type": "integer",
            "title": "Not Matched",
            "description": "Number of routes that couldn't be matched",
            "example": 2
          },
          "no_amazon_id": {
            "type": "integer",
            "title": "No Amazon Id",
            "description": "Number of schedules without amazon_id",
            "example": 5
          },
          "updated_schedules": {
            "items": {
              "$ref": "#/components/schemas/UpdatedScheduleInfo"
            },
            "type": "array",
            "title": "Updated Schedules",
            "description": "List of successfully updated schedules"
          },
          "unmatched_routes": {
            "items": {
              "$ref": "#/components/schemas/UnmatchedRouteInfo"
            },
            "type": "array",
            "title": "Unmatched Routes",
            "description": "List of routes that couldn't be matched to any schedule"
          }
        },
        "type": "object",
        "required": [
          "file_name",
          "import_date",
          "total_routes_in_file",
          "total_schedules_today",
          "matched_and_updated",
          "not_matched",
          "no_amazon_id"
        ],
        "title": "RouteImportResponse",
        "description": "Response from importing routes and updating schedules."
      },
      "SMSResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "provider": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Provider"
          }
        },
        "type": "object",
        "required": [
          "success",
          "message"
        ],
        "title": "SMSResponse",
        "description": "Response model for SMS operations."
      },
      "ScheduleConfirmStatus": {
        "type": "string",
        "enum": [
          "pending",
          "confirmed",
          "rejected"
        ],
        "title": "ScheduleConfirmStatus",
        "description": "Driver schedule confirmation status."
      },
      "ScheduleResponse": {
        "properties": {
          "deputy_id": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Deputy Id",
            "description": "Deputy employee ID (string). Links to driver record in database.",
            "example": "54"
          },
          "driver_name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Driver Name",
            "description": "Driver full name (string). Denormalized from driver record.",
            "example": "Fiona ZHANG"
          },
          "amazon_id": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Amazon Id",
            "description": "Amazon employee ID (string, optional). Used for Amazon Flex integration.",
            "example": "AMZ-12345"
          },
          "schedule_date": {
            "type": "string",
            "format": "date",
            "title": "Schedule Date",
            "description": "Schedule date (ISO 8601 date format: YYYY-MM-DD). Represents the roster date from Deputy, not necessarily the shift start date for overnight shifts.",
            "example": "2025-12-26"
          },
          "route": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 200
              },
              {
                "type": "null"
              }
            ],
            "title": "Route",
            "description": "Route assignment (string, optional). Route code or description.",
            "example": "Route A - North Zone"
          },
          "vehicle_rego": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Vehicle Rego",
            "description": "Vehicle registration number (rego, optional). Vehicle rego assigned to this schedule.",
            "example": "ABC123"
          },
          "vehicle_alias": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Vehicle Alias",
            "description": "Vehicle alias/nickname (optional). Vehicle display name for this schedule.",
            "example": "Van001"
          },
          "id": {
            "type": "integer",
            "title": "Id",
            "description": "Schedule record ID (integer, auto-generated). Primary key.",
            "example": 36
          },
          "deputy_schedule_id": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Deputy Schedule Id",
            "description": "Deputy roster ID (string, optional). Original roster ID from Deputy system.",
            "example": "3558"
          },
          "start_time": {
            "type": "string",
            "format": "date-time",
            "title": "Start Time",
            "description": "Shift start time (ISO 8601 datetime format: YYYY-MM-DDTHH:MM:SS). Timezone-aware timestamp for shift start.",
            "example": "2025-12-25T23:00:00"
          },
          "end_time": {
            "type": "string",
            "format": "date-time",
            "title": "End Time",
            "description": "Shift end time (ISO 8601 datetime format: YYYY-MM-DDTHH:MM:SS). Timezone-aware timestamp for shift end. May be next day for overnight shifts.",
            "example": "2025-12-26T07:00:00"
          },
          "checkin_status": {
            "allOf": [
              {
                "$ref": "#/components/schemas/CheckinStatus"
              }
            ],
            "description": "Driver check-in status (enum string). Possible values: 'not_checked_in' (default), 'checked_in', 'checked_out'.",
            "example": "not_checked_in"
          },
          "confirm_status": {
            "allOf": [
              {
                "$ref": "#/components/schemas/ScheduleConfirmStatus"
              }
            ],
            "description": "Driver confirmation status (enum string). Possible values: 'pending' (default), 'confirmed', 'rejected'. Used to track driver acknowledgment of shift.",
            "example": "pending"
          },
          "reminder_sms_sent": {
            "type": "boolean",
            "title": "Reminder Sms Sent",
            "description": "Reminder SMS sent flag (boolean). True if reminder SMS has been sent to driver.",
            "example": false
          },
          "assignment_sms_sent": {
            "type": "boolean",
            "title": "Assignment Sms Sent",
            "description": "Assignment SMS sent flag (boolean). True if assignment SMS (with route/vehicle info) has been sent to driver.",
            "example": false
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "Record creation timestamp (ISO 8601 datetime format: YYYY-MM-DDTHH:MM:SS). Auto-generated on record creation.",
            "example": "2025-12-25T12:15:29.176043"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "Record last update timestamp (ISO 8601 datetime format: YYYY-MM-DDTHH:MM:SS). Auto-updated on any field change.",
            "example": "2025-12-26T00:43:25.901380"
          }
        },
        "type": "object",
        "required": [
          "deputy_id",
          "driver_name",
          "schedule_date",
          "id",
          "start_time",
          "end_time",
          "checkin_status",
          "confirm_status",
          "reminder_sms_sent",
          "assignment_sms_sent",
          "created_at",
          "updated_at"
        ],
        "title": "ScheduleResponse",
        "description": "Schema for schedule response. Includes all base fields plus system-generated metadata."
      },
      "ScheduleUpdate": {
        "properties": {
          "driver_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Driver Id",
            "description": "Driver ID (integer, optional). When provided, automatically updates deputy_id, driver_name, and amazon_id from the driver record.",
            "example": 137
          },
          "deputy_id": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Deputy Id",
            "description": "Deputy employee ID (string). Links to driver record in database.",
            "example": "61"
          },
          "driver_name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Driver Name",
            "description": "Driver full name (string). Denormalized from driver record.",
            "example": "Archanabahen Patel"
          },
          "amazon_id": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Amazon Id",
            "description": "Amazon employee ID (string, optional). Used for Amazon Flex integration.",
            "example": "AMZ-12345"
          },
          "schedule_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Schedule Date",
            "description": "Schedule date (ISO 8601 date format: YYYY-MM-DD). Represents the roster date from Deputy.",
            "example": "2025-12-26"
          },
          "route": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 200
              },
              {
                "type": "null"
              }
            ],
            "title": "Route",
            "description": "Route assignment (string, optional). Route code or description.",
            "example": "Route B - South Zone"
          },
          "vehicle_rego": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Vehicle Rego",
            "description": "Vehicle registration number (rego, optional). Vehicle rego to assign to this schedule.",
            "example": "ABC123"
          },
          "vehicle_alias": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Vehicle Alias",
            "description": "Vehicle alias/nickname (optional). Vehicle display name to assign to this schedule.",
            "example": "Van001"
          },
          "deputy_schedule_id": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Deputy Schedule Id",
            "description": "Deputy roster ID (string, optional). Original roster ID from Deputy system.",
            "example": "3014"
          },
          "start_time": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Start Time",
            "description": "Shift start time (ISO 8601 datetime format: YYYY-MM-DDTHH:MM:SS). Timezone-aware timestamp for shift start.",
            "example": "2025-12-25T23:00:00"
          },
          "end_time": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "End Time",
            "description": "Shift end time (ISO 8601 datetime format: YYYY-MM-DDTHH:MM:SS). Timezone-aware timestamp for shift end.",
            "example": "2025-12-26T07:00:00"
          },
          "checkin_status": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CheckinStatus"
              },
              {
                "type": "null"
              }
            ],
            "description": "Check-in status (enum string). Possible values: 'not_checked_in', 'checked_in', 'checked_out'.",
            "example": "checked_in"
          },
          "confirm_status": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ScheduleConfirmStatus"
              },
              {
                "type": "null"
              }
            ],
            "description": "Driver confirmation status (enum string). Possible values: 'pending', 'confirmed', 'rejected'.",
            "example": "confirmed"
          },
          "reminder_sms_sent": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reminder Sms Sent",
            "description": "Reminder SMS sent flag (boolean). True if reminder SMS has been sent to driver.",
            "example": false
          },
          "assignment_sms_sent": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Assignment Sms Sent",
            "description": "Assignment SMS sent flag (boolean). True if assignment SMS (with route/vehicle info) has been sent to driver.",
            "example": false
          }
        },
        "type": "object",
        "title": "ScheduleUpdate",
        "description": "Schema for updating a schedule. All fields are optional - only include fields you want to update."
      },
      "SendBulkEmailRequest": {
        "properties": {
          "recipients": {
            "items": {
              "type": "string",
              "format": "email"
            },
            "type": "array",
            "title": "Recipients",
            "description": "List of recipient email addresses"
          },
          "subject": {
            "type": "string",
            "maxLength": 200,
            "minLength": 1,
            "title": "Subject",
            "description": "Email subject"
          },
          "body": {
            "type": "string",
            "minLength": 1,
            "title": "Body",
            "description": "Email body content"
          },
          "html": {
            "type": "boolean",
            "title": "Html",
            "description": "If true, body is HTML content",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "recipients",
          "subject",
          "body"
        ],
        "title": "SendBulkEmailRequest",
        "description": "Request model for sending bulk email."
      },
      "SendBulkSMSRequest": {
        "properties": {
          "phones": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Phones",
            "description": "List of recipient phone numbers"
          },
          "message": {
            "type": "string",
            "maxLength": 1600,
            "minLength": 1,
            "title": "Message",
            "description": "SMS message content"
          }
        },
        "type": "object",
        "required": [
          "phones",
          "message"
        ],
        "title": "SendBulkSMSRequest",
        "description": "Request model for sending bulk SMS."
      },
      "SendEmailRequest": {
        "properties": {
          "to_email": {
            "type": "string",
            "format": "email",
            "title": "To Email",
            "description": "Recipient email address"
          },
          "subject": {
            "type": "string",
            "maxLength": 200,
            "minLength": 1,
            "title": "Subject",
            "description": "Email subject"
          },
          "body": {
            "type": "string",
            "minLength": 1,
            "title": "Body",
            "description": "Email body content"
          },
          "html": {
            "type": "boolean",
            "title": "Html",
            "description": "If true, body is HTML content",
            "default": false
          },
          "cc": {
            "anyOf": [
              {
                "items": {
                  "type": "string",
                  "format": "email"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cc",
            "description": "CC recipients (optional)"
          },
          "bcc": {
            "anyOf": [
              {
                "items": {
                  "type": "string",
                  "format": "email"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Bcc",
            "description": "BCC recipients (optional)"
          }
        },
        "type": "object",
        "required": [
          "to_email",
          "subject",
          "body"
        ],
        "title": "SendEmailRequest",
        "description": "Request model for sending email."
      },
      "SendSMSRequest": {
        "properties": {
          "phone": {
            "type": "string",
            "title": "Phone",
            "description": "Recipient phone number (with country code, e.g., +61451728450)"
          },
          "message": {
            "type": "string",
            "maxLength": 1600,
            "minLength": 1,
            "title": "Message",
            "description": "SMS message content"
          }
        },
        "type": "object",
        "required": [
          "phone",
          "message"
        ],
        "title": "SendSMSRequest",
        "description": "Request model for sending SMS."
      },
      "SkippedRosterInfo": {
        "properties": {
          "roster_id": {
            "type": "string",
            "title": "Roster Id",
            "description": "Deputy roster ID",
            "example": "3040"
          },
          "deputy_id": {
            "type": "string",
            "title": "Deputy Id",
            "description": "Deputy employee ID",
            "example": "999"
          },
          "reason": {
            "type": "string",
            "enum": [
              "no_driver",
              "missing_fields"
            ],
            "title": "Reason",
            "description": "Reason: no_driver (找不到driver), missing_fields (缺少必需字段)",
            "example": "no_driver"
          }
        },
        "type": "object",
        "required": [
          "roster_id",
          "deputy_id",
          "reason"
        ],
        "title": "SkippedRosterInfo",
        "description": "Information about a skipped roster."
      },
      "SyncedScheduleInfo": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id",
            "description": "Schedule ID",
            "example": 282
          },
          "driver": {
            "type": "string",
            "title": "Driver",
            "description": "Driver name",
            "example": "Zhao MA"
          },
          "amazon_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Amazon Id",
            "description": "Amazon ID from Driver table",
            "example": "A338BKIQT4EYF"
          }
        },
        "type": "object",
        "required": [
          "id",
          "driver"
        ],
        "title": "SyncedScheduleInfo",
        "description": "Information about a synced schedule."
      },
      "SystemConfigResponse": {
        "properties": {
          "admin_phone": {
            "type": "string",
            "title": "Admin Phone",
            "description": "管理员提醒电话"
          },
          "driver_file_reminder_days": {
            "type": "integer",
            "title": "Driver File Reminder Days",
            "description": "司机文件临期提醒周期（天）"
          },
          "daily_sms_time": {
            "type": "string",
            "title": "Daily Sms Time",
            "description": "司机每日确认短信时间 (HH:MM)"
          },
          "maintenance_booking_reminder_days": {
            "type": "integer",
            "title": "Maintenance Booking Reminder Days",
            "description": "保养预约提醒周期（天）"
          },
          "next_maintenance_reminder_days": {
            "type": "integer",
            "title": "Next Maintenance Reminder Days",
            "description": "下次保养临近提醒周期（天）"
          }
        },
        "type": "object",
        "required": [
          "admin_phone",
          "driver_file_reminder_days",
          "daily_sms_time",
          "maintenance_booking_reminder_days",
          "next_maintenance_reminder_days"
        ],
        "title": "SystemConfigResponse",
        "description": "系统配置响应 Schema"
      },
      "SystemConfigUpdate": {
        "properties": {
          "admin_phone": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Admin Phone",
            "description": "管理员提醒电话",
            "example": "+61412345678"
          },
          "driver_file_reminder_days": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 90,
                "minimum": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Driver File Reminder Days",
            "description": "司机文件临期提醒周期（天）- 可选: 10, 15, 30",
            "example": 15
          },
          "daily_sms_time": {
            "anyOf": [
              {
                "type": "string",
                "pattern": "^([01]?[0-9]|2[0-3]):[0-5][0-9]$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Daily Sms Time",
            "description": "司机每日确认短信时间 (HH:MM 24小时制)",
            "example": "08:00"
          },
          "maintenance_booking_reminder_days": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 90,
                "minimum": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Maintenance Booking Reminder Days",
            "description": "保养预约提醒周期（天）- 可选: 10, 15, 30",
            "example": 15
          },
          "next_maintenance_reminder_days": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 90,
                "minimum": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Next Maintenance Reminder Days",
            "description": "下次保养临近提醒周期（天）- 可选: 10, 15, 30",
            "example": 10
          }
        },
        "type": "object",
        "title": "SystemConfigUpdate",
        "description": "系统配置更新 Schema\n\n所有字段都是可选的，只更新提供的字段"
      },
      "Token": {
        "properties": {
          "access_token": {
            "type": "string",
            "title": "Access Token"
          },
          "token_type": {
            "type": "string",
            "title": "Token Type",
            "default": "bearer"
          },
          "user": {
            "$ref": "#/components/schemas/UserResponse"
          }
        },
        "type": "object",
        "required": [
          "access_token",
          "user"
        ],
        "title": "Token",
        "description": "JWT token response."
      },
      "UnmatchedRouteInfo": {
        "properties": {
          "route_code": {
            "type": "string",
            "title": "Route Code",
            "description": "Route code from file",
            "example": "CX999"
          },
          "transporter_id": {
            "type": "string",
            "title": "Transporter Id",
            "description": "Transporter ID from file",
            "example": "A1234567890"
          },
          "reason": {
            "type": "string",
            "title": "Reason",
            "description": "Reason for not matching",
            "example": "No schedule found with this amazon_id"
          }
        },
        "type": "object",
        "required": [
          "route_code",
          "transporter_id",
          "reason"
        ],
        "title": "UnmatchedRouteInfo",
        "description": "Information about an unmatched route from the file."
      },
      "UpdatedScheduleInfo": {
        "properties": {
          "schedule_id": {
            "type": "integer",
            "title": "Schedule Id",
            "description": "Schedule ID",
            "example": 36
          },
          "driver_name": {
            "type": "string",
            "title": "Driver Name",
            "description": "Driver name",
            "example": "Kamlesh Patel"
          },
          "amazon_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Amazon Id",
            "description": "Amazon ID (Transporter ID)",
            "example": "A2OOWBS773XYLY"
          },
          "route_code": {
            "type": "string",
            "title": "Route Code",
            "description": "Updated route code",
            "example": "CX203"
          }
        },
        "type": "object",
        "required": [
          "schedule_id",
          "driver_name",
          "route_code"
        ],
        "title": "UpdatedScheduleInfo",
        "description": "Information about an updated schedule."
      },
      "UserCreate": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Name"
          },
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email"
          },
          "phone": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 20
              },
              {
                "type": "null"
              }
            ],
            "title": "Phone"
          },
          "role": {
            "allOf": [
              {
                "$ref": "#/components/schemas/UserRole"
              }
            ],
            "description": "User role: 0 = Admin (Superuser, only one allowed), 1 = Manager (multiple allowed)",
            "default": 1
          },
          "password": {
            "type": "string",
            "minLength": 6,
            "title": "Password"
          }
        },
        "type": "object",
        "required": [
          "name",
          "email",
          "password"
        ],
        "title": "UserCreate",
        "description": "Schema for creating a new user.\n\nRoles:\n- 0 (Admin): Superuser - only one allowed in the system\n- 1 (Manager): Manager - can have multiple"
      },
      "UserLogin": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email",
            "example": "admin@dspsystem.com"
          },
          "password": {
            "type": "string",
            "title": "Password",
            "example": "admin123"
          }
        },
        "type": "object",
        "required": [
          "email",
          "password"
        ],
        "title": "UserLogin",
        "description": "Schema for user login."
      },
      "UserResponse": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Name"
          },
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email"
          },
          "phone": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 20
              },
              {
                "type": "null"
              }
            ],
            "title": "Phone"
          },
          "role": {
            "allOf": [
              {
                "$ref": "#/components/schemas/UserRole"
              }
            ],
            "description": "User role: 0 = Admin (Superuser, only one allowed), 1 = Manager (multiple allowed)",
            "default": 1
          },
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active"
          },
          "is_superuser": {
            "type": "boolean",
            "title": "Is Superuser"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "name",
          "email",
          "id",
          "is_active",
          "is_superuser",
          "created_at",
          "updated_at"
        ],
        "title": "UserResponse",
        "description": "Schema for user response."
      },
      "UserRole": {
        "type": "integer",
        "enum": [0, 1],
        "title": "UserRole",
        "description": "User roles in the system.\n\n0: Admin (Superuser) - Only one allowed in the system\n1: Manager - Can have multiple"
      },
      "UserUpdate": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "email": {
            "anyOf": [
              {
                "type": "string",
                "format": "email"
              },
              {
                "type": "null"
              }
            ],
            "title": "Email"
          },
          "phone": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 20
              },
              {
                "type": "null"
              }
            ],
            "title": "Phone"
          },
          "role": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/UserRole"
              },
              {
                "type": "null"
              }
            ],
            "description": "User role: 0 = Admin (Superuser, only one allowed), 1 = Manager (multiple allowed)"
          },
          "old_password": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Old Password",
            "description": "旧密码（修改密码时必须提供）"
          },
          "password": {
            "anyOf": [
              {
                "type": "string",
                "minLength": 6
              },
              {
                "type": "null"
              }
            ],
            "title": "Password",
            "description": "新密码（需要同时提供 old_password）"
          },
          "is_active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Active"
          }
        },
        "type": "object",
        "title": "UserUpdate",
        "description": "Schema for updating user."
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      },
      "VehicleAssignmentHistoryItem": {
        "properties": {
          "assignment_id": {
            "type": "integer",
            "title": "Assignment Id"
          },
          "schedule_id": {
            "type": "integer",
            "title": "Schedule Id"
          },
          "schedule_date": {
            "type": "string",
            "format": "date",
            "title": "Schedule Date"
          },
          "start_time": {
            "type": "string",
            "format": "date-time",
            "title": "Start Time"
          },
          "end_time": {
            "type": "string",
            "format": "date-time",
            "title": "End Time"
          },
          "driver_id": {
            "type": "integer",
            "title": "Driver Id"
          },
          "driver_name": {
            "type": "string",
            "title": "Driver Name"
          },
          "assigned_by_user_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Assigned By User Id"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "current_day_photos": {
            "items": {
              "$ref": "#/components/schemas/InspectionPhotoWithDate"
            },
            "type": "array",
            "title": "Current Day Photos",
            "default": []
          },
          "previous_usage_photos": {
            "items": {
              "$ref": "#/components/schemas/InspectionPhotoWithDate"
            },
            "type": "array",
            "title": "Previous Usage Photos",
            "default": []
          },
          "inspection_notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Inspection Notes"
          }
        },
        "type": "object",
        "required": [
          "assignment_id",
          "schedule_id",
          "schedule_date",
          "start_time",
          "end_time",
          "driver_id",
          "driver_name",
          "assigned_by_user_id",
          "notes",
          "created_at"
        ],
        "title": "VehicleAssignmentHistoryItem",
        "description": "Schema for vehicle assignment history item with inspection photos."
      },
      "VehicleCreate": {
        "properties": {
          "rego": {
            "type": "string",
            "maxLength": 20,
            "minLength": 1,
            "title": "Rego",
            "description": "Vehicle registration number"
          },
          "alias": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Alias",
            "description": "Vehicle nickname/alias"
          },
          "brand": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 50
              },
              {
                "type": "null"
              }
            ],
            "title": "Brand",
            "description": "Vehicle brand"
          },
          "model": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Model",
            "description": "Vehicle model (e.g., Transit 2021)"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Vehicle status: 'in-use' or 'not-in-use'",
            "default": "in-use"
          },
          "condition": {
            "type": "string",
            "title": "Condition",
            "description": "Vehicle condition: 'available', 'need-repair', or 'unavailable'",
            "default": "available"
          },
          "mileage": {
            "type": "integer",
            "title": "Mileage",
            "description": "Current mileage"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes",
            "description": "General notes about the vehicle"
          },
          "maintenance_cycle_days": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Maintenance Cycle Days",
            "description": "Maintenance cycle in days"
          },
          "maintenance_location": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Maintenance Location",
            "description": "Maintenance location/garage"
          },
          "workshop_email": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Workshop Email",
            "description": "Workshop/garage email"
          }
        },
        "type": "object",
        "required": [
          "rego"
        ],
        "title": "VehicleCreate",
        "description": "Schema for creating a vehicle."
      },
      "VehicleDetailResponse": {
        "properties": {
          "rego": {
            "type": "string",
            "maxLength": 20,
            "minLength": 1,
            "title": "Rego",
            "description": "Vehicle registration number"
          },
          "alias": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Alias",
            "description": "Vehicle nickname/alias"
          },
          "brand": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 50
              },
              {
                "type": "null"
              }
            ],
            "title": "Brand",
            "description": "Vehicle brand"
          },
          "model": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Model",
            "description": "Vehicle model (e.g., Transit 2021)"
          },
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "condition": {
            "type": "string",
            "title": "Condition"
          },
          "mileage": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mileage"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes"
          },
          "inspection_urls": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Inspection Urls"
          },
          "photos": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Photos",
            "default": []
          },
          "maintenance_cycle_days": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Maintenance Cycle Days"
          },
          "maintenance_location": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Maintenance Location"
          },
          "workshop_email": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Workshop Email"
          },
          "last_maintenance_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Maintenance Date"
          },
          "next_maintenance_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Next Maintenance Date"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          },
          "photo_full_urls": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Photo Full Urls",
            "default": []
          },
          "recent_inspections": {
            "items": {
              "type": "object"
            },
            "type": "array",
            "title": "Recent Inspections",
            "default": []
          }
        },
        "type": "object",
        "required": [
          "rego",
          "id",
          "status",
          "condition",
          "mileage",
          "notes",
          "maintenance_cycle_days",
          "maintenance_location",
          "workshop_email",
          "last_maintenance_date",
          "next_maintenance_date",
          "created_at",
          "updated_at"
        ],
        "title": "VehicleDetailResponse",
        "description": "Schema for vehicle detail response with additional info."
      },
      "VehicleInspectionDetailResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "vehicle_id": {
            "type": "integer",
            "title": "Vehicle Id"
          },
          "driver_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Driver Id"
          },
          "vehicle_alias": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Vehicle Alias"
          },
          "driver_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Driver Name"
          },
          "inspection_date": {
            "type": "string",
            "format": "date",
            "title": "Inspection Date"
          },
          "mileage_at_inspection": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mileage At Inspection"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes"
          },
          "photos": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Photos",
            "default": []
          },
          "photo_full_urls": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Photo Full Urls",
            "default": []
          },
          "inspection_status": {
            "type": "string",
            "title": "Inspection Status"
          },
          "reviewed_by_admin": {
            "type": "boolean",
            "title": "Reviewed By Admin"
          },
          "admin_notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Admin Notes"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          },
          "previous": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/PreviousInspectionSummary"
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "type": "object",
        "required": [
          "id",
          "vehicle_id",
          "driver_id",
          "inspection_date",
          "mileage_at_inspection",
          "notes",
          "inspection_status",
          "reviewed_by_admin",
          "admin_notes",
          "created_at",
          "updated_at"
        ],
        "title": "VehicleInspectionDetailResponse",
        "description": "Flat inspection detail with current info + simplified previous."
      },
      "VehicleInspectionPhotoResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "vehicle_id": {
            "type": "integer",
            "title": "Vehicle Id"
          },
          "driver_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Driver Id"
          },
          "vehicle_alias": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Vehicle Alias"
          },
          "driver_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Driver Name"
          },
          "inspection_date": {
            "type": "string",
            "format": "date",
            "title": "Inspection Date"
          },
          "mileage_at_inspection": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mileage At Inspection"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes"
          },
          "photos": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Photos",
            "default": []
          },
          "photo_full_urls": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Photo Full Urls",
            "default": []
          },
          "inspection_status": {
            "type": "string",
            "title": "Inspection Status"
          },
          "reviewed_by_admin": {
            "type": "boolean",
            "title": "Reviewed By Admin"
          },
          "admin_notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Admin Notes"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "vehicle_id",
          "driver_id",
          "inspection_date",
          "mileage_at_inspection",
          "notes",
          "inspection_status",
          "reviewed_by_admin",
          "admin_notes",
          "created_at",
          "updated_at"
        ],
        "title": "VehicleInspectionPhotoResponse",
        "description": "Schema for inspection with parsed photo URLs."
      },
      "VehicleInspectionResponse": {
        "properties": {
          "inspection_date": {
            "type": "string",
            "format": "date",
            "title": "Inspection Date"
          },
          "mileage_at_inspection": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mileage At Inspection",
            "description": "Vehicle mileage at time of inspection"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes",
            "description": "Inspection notes"
          },
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "vehicle_id": {
            "type": "integer",
            "title": "Vehicle Id"
          },
          "driver_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Driver Id"
          },
          "vehicle_alias": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Vehicle Alias"
          },
          "driver_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Driver Name"
          },
          "inspection_urls": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Inspection Urls"
          },
          "inspection_status": {
            "type": "string",
            "title": "Inspection Status"
          },
          "reviewed_by_admin": {
            "type": "boolean",
            "title": "Reviewed By Admin"
          },
          "admin_notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Admin Notes"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "inspection_date",
          "id",
          "vehicle_id",
          "driver_id",
          "inspection_urls",
          "inspection_status",
          "reviewed_by_admin",
          "admin_notes",
          "created_at",
          "updated_at"
        ],
        "title": "VehicleInspectionResponse",
        "description": "Schema for vehicle inspection response."
      },
      "VehicleInspectionReview": {
        "properties": {
          "inspection_status": {
            "type": "string",
            "pattern": "^(pending|passed|failed)$",
            "title": "Inspection Status",
            "description": "Inspection status: 'pending', 'passed', or 'failed'"
          },
          "admin_notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Admin Notes",
            "description": "Admin review notes/feedback"
          }
        },
        "type": "object",
        "required": [
          "inspection_status"
        ],
        "title": "VehicleInspectionReview",
        "description": "Schema for admin to review/approve inspection."
      },
      "VehicleMaintenanceResponse": {
        "properties": {
          "maintenance_date": {
            "type": "string",
            "format": "date",
            "title": "Maintenance Date"
          },
          "location": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Location"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "cost": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cost"
          },
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "vehicle_id": {
            "type": "integer",
            "title": "Vehicle Id"
          },
          "reminder_email_sent": {
            "type": "boolean",
            "title": "Reminder Email Sent"
          },
          "confirmation_received": {
            "type": "boolean",
            "title": "Confirmation Received"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "maintenance_date",
          "id",
          "vehicle_id",
          "reminder_email_sent",
          "confirmation_received",
          "created_at",
          "updated_at"
        ],
        "title": "VehicleMaintenanceResponse",
        "description": "Schema for vehicle maintenance response."
      },
      "VehicleResponse": {
        "properties": {
          "rego": {
            "type": "string",
            "maxLength": 20,
            "minLength": 1,
            "title": "Rego",
            "description": "Vehicle registration number"
          },
          "alias": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Alias",
            "description": "Vehicle nickname/alias"
          },
          "brand": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 50
              },
              {
                "type": "null"
              }
            ],
            "title": "Brand",
            "description": "Vehicle brand"
          },
          "model": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Model",
            "description": "Vehicle model (e.g., Transit 2021)"
          },
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "condition": {
            "type": "string",
            "title": "Condition"
          },
          "mileage": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mileage"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes"
          },
          "inspection_urls": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Inspection Urls"
          },
          "photos": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Photos"
          },
          "maintenance_cycle_days": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Maintenance Cycle Days"
          },
          "maintenance_location": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Maintenance Location"
          },
          "workshop_email": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Workshop Email"
          },
          "last_maintenance_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Maintenance Date"
          },
          "next_maintenance_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Next Maintenance Date"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "rego",
          "id",
          "status",
          "condition",
          "mileage",
          "notes",
          "maintenance_cycle_days",
          "maintenance_location",
          "workshop_email",
          "last_maintenance_date",
          "next_maintenance_date",
          "created_at",
          "updated_at"
        ],
        "title": "VehicleResponse",
        "description": "Schema for vehicle response."
      },
      "VehicleUpdate": {
        "properties": {
          "rego": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 20,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Rego"
          },
          "alias": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Alias"
          },
          "brand": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 50
              },
              {
                "type": "null"
              }
            ],
            "title": "Brand"
          },
          "model": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Model"
          },
          "status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Status",
            "description": "Vehicle status: 'in-use' or 'not-in-use'"
          },
          "condition": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Condition",
            "description": "Vehicle condition: 'available', 'need-repair', or 'unavailable'"
          },
          "mileage": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mileage"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes"
          },
          "maintenance_cycle_days": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Maintenance Cycle Days"
          },
          "maintenance_location": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Maintenance Location"
          },
          "workshop_email": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Workshop Email"
          }
        },
        "type": "object",
        "title": "VehicleUpdate",
        "description": "Schema for updating vehicle."
      },
      "VehicleUsageHistoryResponse": {
        "properties": {
          "vehicle_id": {
            "type": "integer",
            "title": "Vehicle Id"
          },
          "rego": {
            "type": "string",
            "title": "Rego"
          },
          "alias": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Alias"
          },
          "brand": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Brand"
          },
          "model": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Model"
          },
          "assignments": {
            "items": {
              "$ref": "#/components/schemas/VehicleAssignmentHistoryItem"
            },
            "type": "array",
            "title": "Assignments",
            "default": []
          },
          "total_assignments": {
            "type": "integer",
            "title": "Total Assignments",
            "default": 0
          },
          "inspections": {
            "items": {
              "$ref": "#/components/schemas/VehicleInspectionPhotoResponse"
            },
            "type": "array",
            "title": "Inspections",
            "default": []
          },
          "total_inspections": {
            "type": "integer",
            "title": "Total Inspections",
            "default": 0
          },
          "maintenance_records": {
            "items": {
              "$ref": "#/components/schemas/VehicleMaintenanceResponse"
            },
            "type": "array",
            "title": "Maintenance Records",
            "default": []
          },
          "total_maintenance": {
            "type": "integer",
            "title": "Total Maintenance",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "vehicle_id",
          "rego",
          "alias",
          "brand",
          "model"
        ],
        "title": "VehicleUsageHistoryResponse",
        "description": "Schema for comprehensive vehicle usage history."
      }
    },
    "securitySchemes": {
      "HTTPBearer": {
        "type": "http",
        "scheme": "bearer"
      }
    }
  }
}